/**********************************************************************
 *	PWM Sound Driver
 **********************************************************************
 * TIMER0による高速ＰＷＭ（8bit D/A）出力
 *
 *	void sound_init(void)	PWM 初期化.
 *	void sound_mix(void)	ミキシング.
 *
 *
 *
 */
#include <avr/io.h>
#include <avr/interrupt.h>
#include <avr/pgmspace.h>

#include "config.h"
#include "task.h"
#include "sound.h"

/**********************************************************************
 *	初期化
 **********************************************************************
 */
void sound_init(void)
{
#if	0
	SPK_OUT_DDR |= SPK_OUT_BIT_MASK;	// PD6をout.
	TCCR0A = 0b10000011;	//COM0A=比較一致でLow,高速PWM
	TCCR0B = 0b00000001;
	OCR0A  = 128;
#endif
}

/**********************************************************************
 *	8bit D/A出力.
 **********************************************************************
 */
// timer.c 側に実装.
void sound_out(uchar x);

/**********************************************************************
 *	チャネルミキシング.
 **********************************************************************
 */
static	void sound_mix(void)
{
}

/**********************************************************************
 *	発振音を鳴らすタスク.
 **********************************************************************
 */
void sound_task(void)
{
	sound_mix();
}

/**********************************************************************
 *	発振音を鳴らす.
 **********************************************************************
 *	ch : (0..3)    発音チャネル.
 *	p  : (0..2047) ピッチ定数.
 *	v  : (0..255)  音量
 */
void sound_play(uchar ch,uint p,uchar v)
{
}

/**********************************************************************
 *	発振音の減衰量を指定する.
 **********************************************************************
 *	p  : (0..2047) ピッチ定数.
 *	d  : tickあたりの減衰量.
 */
void sound_setdecay(uint p,uchar d)
{
}
/**********************************************************************
 *	発振音を減衰させる. 定期的に呼ぶこと.
 **********************************************************************
 */
void sound_decay()
{
}
/**********************************************************************
 *	発振音を全部止める.
 **********************************************************************
 */
void sound_stop_all()
{
}
/**********************************************************************
 *	
 **********************************************************************
 */

[2010-02](2010-02.md) 

## PIC18F14K50実験

- TIMER2による、200Hz,1000Hz,10kHz割り込みのテストを行ってみました。

<!-- dummy comment line for breaking list -->


説明
	/*******************************************************************
	*	メイン関数	初期化	割り込みベクターの設定.
	********************************************************************

	タイマー２割り込みの実験:

	（１）TIMER2を使って 10kHz周期のインターバル割り込みを行う。
	（２）割り込み処理内で10000回カウントを行い、10000回になると（１秒毎）
	     LED1を反転させる.


	この状態でも picmonit.exe は使用できるので、ホストＰＣからポートを触ったり
	ワークを見たりすることが出来る.



- - - -

**ダウンロード**（仮）
- [pic14k-timer2.zip](https://github.com/iruka-/ATMEL_AVR/blob/master/web/upload/PIC/pic14k-timer2.zip) 

<!-- dummy comment line for breaking list -->

~
~
~
- - - -
## 44.1kHzインターバルで割り込むには？
残念ながら出来ない。
- 近い値としては、

<!-- dummy comment line for breaking list -->

	12 000 000 Hz / 16 / 17 = 44117.64 Hz
	               ~~~   ~~====================PR2を16に設定すると1/17に出来る。
	              prescaler

## では48KHzは？
	12 000 000 Hz / 250 = 48000 Hz
- つまり、prescaler=1/1 , postscaler=1/1 で、PR2を249にすると出来る。
- 問題は、１ＩＮＴの処理が250ステップ以内（フォアグランド処理を５０％負荷で行うには125ステップ以内）にする必要があること。
- 全部asmで書くなら不可能ではないが・・・


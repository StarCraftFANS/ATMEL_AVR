-[2008-07](2008-07.md) 

## Ａｔｏｍ対ｎａｎｏ
Ａｔｏｍ１.６ＧＨｚ 対 ｎａｎｏ１.８ＧＨｚ
- [http://pc.watch.impress.co.jp/docs/2008/0730/ubiq222.htm](http://pc.watch.impress.co.jp/docs/2008/0730/ubiq222.htm) 

<!-- dummy comment line for breaking list -->

- これすなわちアウトオブオーダー対インオーダーの戦いだ。
- 以前は、インテル側（ＰｅｎＭ）がアウトオブオーダーで、ＶＩＡ側（Ｅｄｅｎ）がインオーダーだった。

<!-- dummy comment line for breaking list -->

今回は、攻守入れ替わりになったので、興味津々だ。

- 予想では、アウトオブオーダーを採用したｎａｎｏがＡｔｏｍをぶっちぎると思われていた。
- 実際フタをあけてみると、Ａｔｏｍ善戦。

<!-- dummy comment line for breaking list -->

意外だったのは、
- ＡｔｏｍはＨＴをＯｎにすると５割り増しくらい早くなる（CineBench）こと。
- Ａｔｏｍは負荷の大きさにかかわらず、消費電力はほぼ一定していること。~

<!-- dummy comment line for breaking list -->
である。

## ＩＦ２００８.９ 付録基板Ｃｏｌｄファイアー！
- IF誌は入手できた。
- ＰＴ入りＬＡＮコネクタを買おうかどうか迷っている。
- 秋月の３００円を買うか、若松の７５０円を買うか・・・（秋月のって、通販にのてない）
- 送料も合わせて考えるとえらい高くつくんで、なんかのついでに買うとか、（どうせならＡＣアダプタ付きの）サイレントの通販でｎセット買うことも検討したが、周りの誰も乗り気でないので諦めた。
    - 結局古いＵＳＢ-Ｅｔｈｅｒドングルをばらして、Ｃｏｌｄファイアー基板からドングルがぶらさがる格好になりそうな悪寒。
    - ＳｉｌｅｎｔＣはＸ１　Ｂａｓｉｃの香りがする。あれはあれでＮＥＣのＢＡＳＩＣとかなり毛色が違っていてまた良い。
    - いや、Ｘ６８ＫのＢａｓｉｃかな。

<!-- dummy comment line for breaking list -->

    - どうせならＨｕｍａｎ６８Ｋが動けばよいのに。

<!-- dummy comment line for breaking list -->

    - 最近のＦＬＡＳＨＲＯＭの組み込みマイコンはバスが出てないのが殆どなので、ＲＡＭを２Ｍ〜１６Ｍ載せるのは無理だ。
    - しかしＦＬＡＳＨだけで２５６Ｋあるので、理論上はＮ８８　ＢＡＳＩＣとかＸ１　ＢＡＳＩＣがフルセットで入って充分おつりが来る。
    - ・・・需要はないけど。

<!-- dummy comment line for breaking list -->

#### どうやら今月の基板、熱くなるらしいな。
お前SIZE(28){Ｃｏｌｄなのかファイアーなのか、はっきりせいと。}突っ込んでみる
~
- ３.３ＶのＡＣアダプターは製品によっては高めに出るやつもあるらしいが、３.３ＶでもＬＡＮが生きてると熱いらしい。
- ２.７Ｖくらいに下げるとか対策が必要？

<!-- dummy comment line for breaking list -->

- こないだのｄｓＰＩＣも発熱の多さで萎えた。
- じゃあ、むしろＬＡＮコネが５個も付いている[駄メルコのＢＢＲ４ＭＧルーター](2007-10.md) は出来る子ってことでＦＡ？

<!-- dummy comment line for breaking list -->


- - - -
## Ｃｏｌｄファイアーを熱くさせずに使う方法
シンセ・アンプラグドさんの情報
- [「Ethernet を全く使わない方法での開発の可能性」](http://d.hatena.ne.jp/pcm1723/20080801/1217622806) 
- 目から鱗だった。
- ＬＡＮ機能が目玉の付録基板だが、ＬＡＮを使わずに、シリアルから接続できるようにもなっていた。
- 結局マイコンの基本はシリアルなんだよね。
- ＳＰＩってのは、流行らないのかね。（もちろんＳＰＩもシリアルの一種だ）
- ＵＳＢtoＳＰＩアダプタなんてのがあればいいのか？
- だが、teratermがサポートしていないぞ。

<!-- dummy comment line for breaking list -->

- - - -
## ＭｉｎｉＮｏｔｅの潮流
- Ａｔｏｍ搭載のＭｉｎｉＮｏｔｅは確たるジャンルを築きつつあるようだ。
- しかし、なんでＳＣＨでなくｉ９４５なんだろうね。
- 単にＣＰＵが廉売になって、冷却系の負担が減るから良いのか？
- それとも、ＳＳＤ搭載して、ＨＤＤのカリカリ音が無くなって、衝撃に強いからいいのか？
    - １０インチサイズの液晶だとＬＥＤバックライト可能なので、冷陰極管よりも衝撃に強くなる。

<!-- dummy comment line for breaking list -->

いや、本当の理由はそこじゃない。
- 賢明な諸君はうすうす感づいているとは思うがね。
- 実はＭｉｎｉＮｏｔｅにはSIZE(24){ＷｉｎｄｏｗｓＸＰを搭載しているから}なのだ。
    - 使い慣れている。軽快な動作。
    - Ｖｉｓｔａ拒否！

<!-- dummy comment line for breaking list -->

- あと１，２年もすれば、ＳＳＤの速度性能が劇的に改良されて、Ｖｉｓｔａ搭載の普通のノーパソよりもＭｉｎｉＮｏｔｅのほうがむしろ快適になると思う。

<!-- dummy comment line for breaking list -->

- ＭｉｃｒｏＳｏｆｔは、そのようなハードウェア環境（特にＳＳＤへの配慮）に適応したＯＳを販売すべきだ。

<!-- dummy comment line for breaking list -->


- - - -
## ＩＦ２００８.８付録基板用 ＰＴ入手
- 某通販１５００円＋５００円で入手。
- 速攻でハンダ付けした。

<!-- dummy comment line for breaking list -->

- が、**この基板どうやら死んでるくさい。**はずれくじを引いたか？

<!-- dummy comment line for breaking list -->

- ＰＣを192.168.1.2に手動設定して、192.168.1.10にPINGを送っても無反応。
- telnetもwebも無反応。
- ＣＰＵは、やや熱くなるが触れないほどではない。
- リンクＬＥＤはほんの時々点く。アクティブＬＥＤが点かない。（これが問題なのか？）
- ケーブルは２本変えて試した。ハブは問題なし（他のＰＣで繋ぐテストはＯＫだった）
- Ｗｉｎｄｏｗｓのファイアウォールも問題なし。

<!-- dummy comment line for breaking list -->

- ハンダ付けは簡単すぎてミスは考えられない。目視上問題なし。
- リセットを数回実行したが変化無し。

<!-- dummy comment line for breaking list -->

こういう場合どうすればいいんだろう。
- やっぱりシリアルで試せということか？
    - 最初からシリアルにすればよかった・・・orz
    - で、ボーレートはいくつなの？

<!-- dummy comment line for breaking list -->

ＬＡＮで色々いたずらするおもちゃとしては調度手頃なんだけどなぁ。

- - - -
## [ＮＥＣ７８Ｋ用の逆アセンブラ](NEC78K.md)  を作ってみた。
- とりあえず、もう飽きたので公開。
- してみたが、まだSaddrとSfrの違いが分かっていないので、両方とも 0xXX の８ビット値で表示。
    - ↑たぶん、それ間違いなんだよねー。SfrってのはI/Oポートの番号だと思うな。
    - （一応６４ｋのメモリー空間にＭＡＰされた２５６バイトのエリアのことだろう？）
- で、中を見てみたら、0xffの未使用メモリーがたくさんあったので、たぶんこれ別々のバイナリー

<!-- dummy comment line for breaking list -->
を焼いてアドレス決めうちコールしているか何か事情があるんだろうなと察してくれというタイプ？
- そこに拡張機能を詰め込んでやろうかとか考えてみるが、それもあんまりだなー。
- ｉ８０８５のそっくりさんのくせに命令コードはインテル仕様と全然違うんで、ワンライナーなアセンブラが欲しいところ。
- 逆アセンブラ作成で用意したテーブルはアセンブラ用にも使えるように作ったので、ワンライナーを作ることも可能だろう。
- しかし、ターゲット側に埋め込むには、汎用のテーブルにするよりパターンの同じ命令を汎用データにしてさらにテーブル圧縮が必要そうだ。

<!-- dummy comment line for breaking list -->

- でも、考えてみたら、どうせＵＳＢでＰＣと繋ぐわけだからteratermの代わりにＰＣ側でアセンブラ、逆アセンブラをやらせて、デバイス側はpeekとpokeだけを持つやりかたのほうが軽量でいいと思う。

<!-- dummy comment line for breaking list -->

- - - -
## ここでまた、別アーキテクチャーに浮気
- こんどはkuro-box/pro のハックに挑戦（嘘）
- べつにハックするつもりなんかない。（時間が無駄だ）
- 普通にVineとかDebianが動けばそれでよかった。
- しかし、現実は全然甘くは無く、最もLinuxキットに近い製品でありながら、

<!-- dummy comment line for breaking list -->
普通にLinuxを動かすことさえ、イバラの道であるようだ。
    - debian化キットはgoogleで検索すればすぐに見つかったが、
    - その前の作業で、wget ｈｔｔｐ://****/*** とかのコマンドが全然言うことを聞かないという状況には参った。
    - なんでも、busy-boxのtarがあまりにだめなので、まずはtarを転送しないといけない。
    - しかし、scp もないし、sambaも全然動かないし、そのまえにURLをresolveしてくれない。
    - DHCPは受け付けるようで、/etc/resolv.confは正しく生成されているし、そのIPアドレスにpingを打つことまでは出来るのだが、
    - 名前解決が全く動いていないし、
    - さらに悪いことに、wget ｈｔｔｐ://xxx.xxx.xxx.xxx/yyy のようにIPじか打ちでのwgetも出来ない。

<!-- dummy comment line for breaking list -->

- いや、[同じ会社のＢＢＲ４ＭＧルーターのＬｉｎｕｘ化](2007-10.md) で最小構成のLinuxのことは知ってはいるんだけどね。
    - kuro-box/proは本当に**素人さんお断り**のハードウェアパーツ（試作品）だね。製品じゃないよ。

<!-- dummy comment line for breaking list -->

- まあ、ぼちぼちdebian化してみるけど・・・

<!-- dummy comment line for breaking list -->

- - - -
## 玄箱Pro/Debian化成功ナリ。
- 名前解決が通らない原因は、ルーターのファイアヲールが厳しすぎたからだった。
- 外部からのtcp/udpの0〜1024を全て遮断していたため。
- 最初は、ＭＴＵの設定かなとか思っていた。

<!-- dummy comment line for breaking list -->

しかしWindowsでは、ちゃんと引けるから不思議なんだよなー。
- 名前解決が出来るようになってからは、普通にLinuxとして使えてる。apt-getも出来るし問題ない。
- そもそもＨＤＤを繋げないままで何かしようというのが無理だったのかな。
- debian化キットのパッケージはとても小さいので、内蔵の２５６Ｍフラッシュに入れてディスクレスサーバーにしたいところだが、はたして可能だろうか？
- ついでにファンレスにしたい。

<!-- dummy comment line for breaking list -->

たぶん失敗するとシリアルコンソールの刑で島流し。

- - - -
## 玄箱Proはたっぷり２日は遊べるサーバーだよ。
基本的には、下記サイトに解説されている、sushi-k日記２さんのキットを入れるだけで、
誰でも玄箱ProをDebian化出来る。
- [http://www.ellinikonblue.com/PukiWiki/index.php?Debian%20%B8%BC%C8%A2%20Pro%20%A4%CB%A4%B9%A4%EB](http://www.ellinikonblue.com/PukiWiki/index.php?Debian%20%B8%BC%C8%A2%20Pro%20%A4%CB%A4%B9%A4%EB) 
- それ自体は１時間くらいで出来上がる。
- 但し、debian化されたあとの玄箱Linuxは、ほぼ最小構成のユーザーランドなので、
- これを普通のWebサーバーに仕立てて、一通りの環境を揃えるまでの作業は、ざっと見積もって２日はたっぷり掛かる（遊べる）わけだ。
- （実際、Perlを入れてみたが最小構成だったのでCPANに接続したところ、延々とモジュールの区組み込みが続く・・・）
- Apache2はもちろんVineでは昔から使っていたのでよく知っているつもりではあったが、
- Debian用のものはconfの構成が一味違うので、これまた普通に使える状態まで持っていくのに２，３時間悩んでしまった。
- それでも、ARM用のバイナリーパッケージが全部揃っていてapt-get（実はaptitudeがお勧めらしいが）出来るというのはほんとに有難い。debian偉大！
- まるでPC用のLinuxインストールと同程度の手間、同じやり方でパッケージが組み込めるんで
- ほんとに感謝だ。

<!-- dummy comment line for breaking list -->

これが、例えばVine化ということになった場合だと、全て自前でビルドしないといけないので、２日どころか軽く２週間は潰れますな。（しかもフルタイムで）
- それでもうまく入れられる保証はないし。
- そもそも普通に仕事してる人が片手間にやれる作業量ではないと思う。

<!-- dummy comment line for breaking list -->

**結論として**
- 玄箱ProはLinux教材としてだけでなく実用性ありまくりのLinux Boxだ。
- i386系CPUのPCで使っているLinuxサーバーと比べてもほとんど遜色ない性能、使い勝手なのに消費電力はHDD１台分相当だ。
- 最初は内蔵256MBのNANDフラッシュだけで運用しようと思っていた。
- が、実際Debian化してみると、いろいろ欲が出てきて、現在rootパーティションが５００MBになっている。
- ということは、SATA接続の2.5inch HDDとか、１G程度のUSBメモリーに入れて運用するしかないんだろうなぁ・・・。
- もちろん、U-bootの書き換えに失敗するとシリアルコンソール島流しが待っているわけだが。

<!-- dummy comment line for breaking list -->

- - - -
## Atom印の玄箱なんてありえない。
もちろん、intelがAtomを世に出した最大の理由は**ARMのリプレース**（もしくはARM対抗）だ。
- NetBookをARMで独占されたくないからだが、その副作用がすでに出てきている。
    - すなわち、NetBookが、現行のNotePCシェアを食ってしまっている。５０％もシェア取るか？>某記事

<!-- dummy comment line for breaking list -->

では、思いっきりARMで構成されている玄箱のAtom版はあり？
- ありえない。
- キューブサイズになってしまう。
- じゃあキューブ型PC買えよという話だ。
- Atom+SCHでぎゅうぎゅうに詰め込んだとしても消費電力面で厳しい。
- 次の世代で、ワンチップ(SoC)になったとしてもどうだろう。
- そもそもSCHにビデオ回路が載っていることだけで大きな無駄だ。
- じゃあ、こういう仮想質問ではどうか？
    - Atomの次の世代のSoCではビデオなしという選択もありにして、玄箱のARM CPUと置き換えられるほどのコストパフォーマンスを発揮できるだろうか？

<!-- dummy comment line for breaking list -->

現実は、厳しいだろう。
- これやるということは、Atomのバーゲンセールやることと同義。
- でもintelは、i945と抱き合わせる等で、なるべく単価を上げたいわけ。

<!-- dummy comment line for breaking list -->

- しかし、どうしてこうAtom＋爆熱i945の製品ばっかりなんだろう。SCHは作ってないのか？

<!-- dummy comment line for breaking list -->

- - - -
## 玄箱を飼い慣らす。
- 結局２.５ｉｎｃｈのＳＡＴＡ　ＨＤＤを買ってきて交換した。
- knoppixのＤＶＤを焼いて、適当なＷｉｎｄｏｗｓＰＣに突っ込む。
- 但し、Ｗｉｎｄｏｗｓの起動ＨＤＤを外し、玄箱の引越しＨＤＤ２台だけを接続。

		# dd if=/dev/sda of=/dev/sdb
- １０分くらいしたら、＾Ｃ
- 何ギガコピーされたかというレポートが出る。３Ｇ以上だったらＯＫ．
- 玄箱は、２.５インチ用の固定ねじ穴がちゃんと付いていた。感心。
- 但し、２.５インチＨＤＤはわりと基板が金属シャーシーに密着するので、念のため適当な絶縁シート（あるいは放熱シート）を金属シャーシー側に貼っておいたほうが吉。

<!-- dummy comment line for breaking list -->

- 交換したら、無問題で再起動。
- 但し、容量の関係でパーティション１，２，３までしかコピーされていないはずなので、

		# fdisk /dev/sda
		ここで、sda4を一旦開放し、新しいＨＤＤの最大容量に切り直す。
- パーティションテーブルを読み替えるため、一回再起動。

		# mkfs.ext3 /dev/sda4
- 再フォーマット。
- あとは、/dev/sda4を適当な空ディレクトリ(たとえば/mnt/sda4/)にマウントして好きなように使用する。

<!-- dummy comment line for breaking list -->

- ３.５インチのときとくらべて（重量が）随分軽くなったような気がする。
- あとはファンの回転数を調整したいのだが・・・、まだmiconaplが動かない。chroot して動かそうとはするのだが、 /var/lock/miconapl がロックできないとぬかす。
- /usr/local/buffalo/var/　は存在していないので作ってみるが、それでも動かない。
- このあたりは良く分からないなぁ・・・。

<!-- dummy comment line for breaking list -->

- - - -
## Ａｔｏｍ搭載ＮｅｔＢｏｏｋ
- 某マイコンショップにて、ＥｅｅＰＣ９０１ＸとＭＳＩ　Ｕ１００が並べて展示してあった。
- キーピッチはＭＳＩのほうがかなり大きくて押しやすそう。
- ＥｅｅＰＣ９０１Ｘは、背面がかなり熱くなる。パームレストの爆熱ぶりは、７０１よりすこしましな程度。

<!-- dummy comment line for breaking list -->

インテル、メインストリーム向け160GB SSDを年内投入？
- [http://japanese.engadget.com/2008/08/15/intel-160gb-ssd/](http://japanese.engadget.com/2008/08/15/intel-160gb-ssd/) 
- こうなると、いくらＨＤＤが頑張っても到達できない速度。
- そりゃ、Ｆｌａｓｈメモリーはたくさん実装すればするほどアクセスの並列度は上がるわけで、速くしようと思えばいくらでも速く出来る。
- ＨＤＤだってＲＡＩＤ０で台数を増やせばそうなるけど、あんまり現実味が無い。
    - とくにＮｅｔＢｏｏｋでは。
- となると、ＮＯＴＥＢＯＯＫのハイエンドは全部ＳＳＤになる？
- まあ、そこまでいかなくても、３２ＧＢ程度の容量であればコスト的に全然痛くないので、

<!-- dummy comment line for breaking list -->
Ｃ：ドライブをＳＳＤにしてＤ：ドライブにＨＤＤという使い方をすれば常時モーターを回さなくても済む。
- ＮｅｔＢｏｏｋ的なソリューションでいけば、ローカルはＳＳＤオンリーにして、ＬＡＮの先（たとえば玄箱）に自分ストレージを持っていればいいわけだ。
- そういえば、Microsoftなんかも無料のストレージサービスをやっているようだ。

<!-- dummy comment line for breaking list -->

マイクロソフト、5 GBの保存スペースが無料のオンライン ストレージ サービス「Windows Live SkyDrive」正式版を世界38カ国で提供開始 
- [http://www.microsoft.com/japan/presspass/detail.aspx?newsid=3365](http://www.microsoft.com/japan/presspass/detail.aspx?newsid=3365) 

<!-- dummy comment line for breaking list -->

５Ｇでは足りんけど。

- - - -
なんかこう、支離滅裂なＢ−Ｌｏｇになっている気がする・・・
## Ｃｏｌｄファイアーをもう一度試す。
- 別の環境で実験。
- こんどは、リンクＬＥＤは点灯しっぱなし。
- だけど、pingは、通らない。何故？
- 本屋にＩＦ誌まだあったんだよー。
- だけど、買って基板交換するのは**敗北宣言**になるから手を出さない。

<!-- dummy comment line for breaking list -->

## そおいえば、本題とは全然関係ないんだけどね。
ＲＦワールドっていう雑誌あるだろ。
- あれの雑誌名だけで思いついた**ＨｅａｖｙＭｏｏｎ**なんだけどね。まあ聞いて。
- アマ無線のバンドってあるだろ。
- ７ＭＨｚとか２１ＭＨｚとかある、あれ。
- リアル無線だと電波出すのに免許（この場合局免ね。従事者なら持ってるから）要るじゃん。
- バンドごとにインターネットのＩＲＣみたくチャンネル切ってさ。
- そこに１００ｋＨｚくらいの帯域でＷａｖｅを流すわけ。
- 当然、受信はストリーミングで受けてソフトウェアラジオね。
- 送信は、別にＩＲＣのサーバーみたいなやつに自分の周波数をセットして自分の声だけ流すと、
- メインストリーミングにＭＩＸして流してくれるみたいな奴。

<!-- dummy comment line for breaking list -->

まあ、ＳＳＢトランシーバーをＴＣＰ/ＩＰのストリームでエミュレートするごっごなんだ。
- あのダイアル回すと音程がずれていく感覚がなんともいえないよね。
- ダイアルは、マウスのスクロールホイールでいいや。とりあえず。

<!-- dummy comment line for breaking list -->

- 一人ＳＳＢ無線機でも作ってみるかな。**意味は無いけど**

<!-- dummy comment line for breaking list -->

- - - -
![screenshot](https://github.com/iruka-/ATMEL_AVR/blob/master/counter/dream.cgi?id=2008n08&name=a.gif)


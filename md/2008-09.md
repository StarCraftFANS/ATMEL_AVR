[2008-08](2008-08.md) 

## とりあえず９月にしてみる。
ここで意味のない質問

Ｑ：２００８.９月(Dark September)の行事は何？~
Ａ：次の中から量子力学的に選択。
- 天変地異（地震）
- テロ
- （原油？価格）暴落
- 間違って（余剰次元の理論がたまたま当たって）ＭＢＨが生成され地球が飲み込まれる。（これはありえないらしい）

<!-- dummy comment line for breaking list -->


    - 当たった場合でも、ＭＢＨの寿命は光速で動いても原子核のサイズより小さいらしいので、一瞬で蒸発するらしい・・・大丈夫、だよね。
    - 当たらない場合は、ＬＨＣが出せる最高出力の（１０の１６乗）倍のエネルギーがない限りＢＨは作れないらしいので・・・大丈夫、だよね。

<!-- dummy comment line for breaking list -->


とりあえず、北京オリンピックは無事開催されたので、ジョン・タイターのいた時間線とは離れたらしい。

あとはアメリカが内線状態にならないならおＫ。

いや、仮にせよ、ＭＢＨが作れたとしよう。
- どうやって空間に固定すんの？
- どうやって平衡状態にすんの？

<!-- dummy comment line for breaking list -->

それが出来るなら、ＭＢＨから出るガンマ線放射で半永久発電できるという話だが、かなり眉唾である。
- 外部からは、適当な物質を投げ込むだけ。
- ＢＨ蒸発（ホーキング輻射）の放射で発電。
- 平衡状態が崩れたら地球を飲み込んで成長するかもしれないので、原発よりかなりハイリスクハイリターン。

<!-- dummy comment line for breaking list -->

で、そんな危険なものを使ってタイムトラベルして来たとジョン・タイターは主張していたらしい。
- ＭＢＨネタのＳＦは、ＪＰホーガンの「星を継ぐもの」３部作にもあった。
- まあ、チューリアンの文明は進んでいるので、ＭＢＨの制御とか可能なんだろうけど。
- 今の人類には到底無理無理。

<!-- dummy comment line for breaking list -->


- - - -
## Athlon64 2000+とAtomの比較
- [http://northwood.blog60.fc2.com/blog-entry-2207.html#more](http://northwood.blog60.fc2.com/blog-entry-2207.html#more) 

<!-- dummy comment line for breaking list -->

- これを見る限りではＡＭＤまだまだ元気だぉ。
- 単体ＣＰＵではなくチップセットまで含めると、ＡＭＤのほうが省電力で高性能って、いったい・・・。
- ビデオ性能ではＡＭＤ７８０のほうが断然良いよね。

<!-- dummy comment line for breaking list -->

- ＡＭＤはさっさとＧＰＵ統合してＮｅｔＢｏｏｋ市場でもＡｔｏｍに勝って欲すい。

<!-- dummy comment line for breaking list -->

- - - -
## Ａｔｏｍの事情。
■元麻布春男の週刊PCホットライン■~
Netbookの生きる道
- [http://pc.watch.impress.co.jp/docs/2008/0823/hot566.htm](http://pc.watch.impress.co.jp/docs/2008/0823/hot566.htm) 

<!-- dummy comment line for breaking list -->

引用ここから
- 現在、市場にはさまざまなミニノートPC/Netbookが市販されているが、
- エントリークラスのノートPCとの差別化を図るためIntelは、いくつかの条件を挙げている。
    - ディスプレイを大きくし過ぎないこと、
    - HDDよりも小容量SSDを採用すること、
    - 価格をさらに低く抑えること、
    - Web中心でアプリケーションの追加インストール等はあまり考えないこと、
    - シングルスピンドル(光学ドライブを搭載しないという意味)であること、
- などだ。手っ取り早くいうと、高性能化を図るより、低価格化を行なえ、という方針らしい。市販の製品の中では、ASUStekのEee PCがIntelの言うNetbookに一番近い存在だ。

<!-- dummy comment line for breaking list -->

ここまで。
- まあ、こういう縛りがあったわけだな。
- だから、普通サイズのノートＰＣに（ベンダー側は）使えないというわけか。
- 性能的にはＰｅｎＭの１Ｇ程度はあるので、充分使えるんだけど。

<!-- dummy comment line for breaking list -->

- ついでに言うとEee PCはちっちゃくて可愛いのは良いが、発熱が気になるので手を出せない。
- 店頭の展示品は冷房の効いた店内でも裏面は熱くて長時間触れない。パームレストのところもやや熱い。
- インテルはほんとにＡｔｏｍの片割れの９４５をなんとか改善して欲しいと切に願う。

<!-- dummy comment line for breaking list -->



- - - -
## ついに出てきた高速ＳＳＤ
IntelがIDFで1.8/2.5インチの高速SSDを発表
- [http://pc.watch.impress.co.jp/docs/2008/0820/mobile421.htm](http://pc.watch.impress.co.jp/docs/2008/0820/mobile421.htm) 
- ２５０ＭＢ/Ｓか。それってＳＡＴＡ２の転送限界に近いじゃん。
- ＳＡＴＡ１なら１.５Ｇｂｐｓだけど８-１０エンコーディングされてるはずなので１５０ＭＢ/Ｓが理論上の上限だ。
- 逆に言うと、それ以上速くする必要もない
- 速くしても対応ＩＦもないし、ＨＯＳＴ側ＰＣが追いつかない。
- - - -
## Ｄｅｂｉａｎ（lｅｎｎｙ ａｍｄ６４）のインストールに失敗。
- 原因は今のところ分からない。
- テキストインストーラー、グラフィックインストーラーのどちらも現象は同じ。
- ベースパッケージのインストールまでは成功。
- パッケージの選択で、

		[＊] デスクトップ
		[　] （中略）
		[＊] 標準のシステム
- を実行した後、暫くして赤い画面になり、パッケージセレクトに失敗した旨のメッセージが出る。
- [ＡＬＴ]＋[Ｆ３かＦ４のどっちか]でエラーメッセージを読もうとしても、字化けして読めない。
- 上記選択肢をいろいろ変えたけれど駄目。
- かれこれ５回くらい同じことを繰り返した後に、もう諦めた。

<!-- dummy comment line for breaking list -->

- 玄箱Ｐｒｏのほうはちゃんと動いているからいいや。
    - 実はちゃんと動いていない。いくつか疑問点があるので、フルセットのＰＣ版を用意したかったのだ。
    - だったらＥｔｃｈのｉ３８６にしとけって？ごもっとも。
    - でもｌｅｎｎｙのＤＶＤ５枚も焼いちゃったし。

<!-- dummy comment line for breaking list -->


- 疑問点というのは、localeがja_JP.EUC-JPになっているときは、man pageが引けない（invalid charset name）になる、というものだ。
- わざわざUTF-8に切り替えれば、manは引ける。
- あと、LANG=C man ls とかやれば、英語で出てくるけど。

<!-- dummy comment line for breaking list -->

    - 追記： この問題は less がeucに対応していないこと、らしい。
    - 回避策としてはlvをインストールして export PAGER=lv だ。

<!-- dummy comment line for breaking list -->


インストールには失敗しているけれど、その後ＧＲＵＢ入れて再起動させれば一応Ｄｅｂｉａｎは最小構成で動いている。
- まあ、その後に地獄の設定が待っているわけだが。
- フルパッケージに近い状態まで一撃でインストール出来るようになってないのかな？それともベータだから？

<!-- dummy comment line for breaking list -->

- - - -
## ＩＦ２００８.８付録基板 ちゃんと動いたっ！
壊れてなかった。
    - **この基板どうやら死んでるくさい。**はずれくじを引いたか？
    - ＰＣを192.168.1.2に手動設定して、192.168.1.10にPINGを送っても無反応。
    - telnetもwebも無反応。

<!-- dummy comment line for breaking list -->

別環境（スイッチングハブ）にて接続したところ、ちゃんとtelnet接続出来た。
- 原因はコレ
- [http://kumikomi.typepad.jp/interface_coldfire/2008/08/faq-no5-bd57.html](http://kumikomi.typepad.jp/interface_coldfire/2008/08/faq-no5-bd57.html) 
    - 実は同コントローラには，他にもオート・ネゴシエーション機能にエラッタがあり，
    - オート・ネゴシエーションが正常に動作しません．そのためオート・ネゴシエーション
    - 機能を切り，**SilentCでは10Mbpsで**，GDBスタブでは100Mbpsで，固定設定としています．

<!-- dummy comment line for breaking list -->

１０Ｍｂｐｓの半二重だってー（ＡＡ略）
- そりゃ動かんわ。
- なにせ、以前に試したハブは**１００ＢＡＳＥのリピーターハブ**だ。
- バッキャロー

<!-- dummy comment line for breaking list -->

- - - -
## jedで漢字を使いたいよー。
大概のＬｉｎｕｘ上には、jedというEmacs風の軽量エディタが存在する。
- 自分は[viもemacsも使えない人](https://github.com/iruka-/ATMEL_AVR/blob/master/web/wiki.html) なので、日頃からjedを愛用している。
- カスタマイズの結果、使い勝手では、昔のＶｚと同じくらいに使えている。（と思っている）

<!-- dummy comment line for breaking list -->

ところが、最近のjed(0.99.18,VineLinux5.0とdebian Etch)では、SJISが使えなくなっているようだ。
- VineLinux4.2用(0.99.14+J0.6.12)はＯＫだった。
- ソースを展開してみると、・・・

		slang-1.4.9/src/slkanji.c
- が無くなっていた。
- いや、それだけじゃない。EUCのテキストファイルは開けるのだが、カーソルが全角単位で移動しないので、EUC漢字を２文字のASCIIと勘違いしている。
- で、UTF-8ならちゃんと編集出来るのかと思ったら、そうでもないようだ。（ＳＪＩＳと同様に激しく字化けする）

<!-- dummy comment line for breaking list -->

日本語パッチされたjedが欲すい・・・
- というか単にjed単体で良ければ実行ファイルと設定ファイルをコピーというやりかたでＯＫなはずなんだけど、jedはslangに思いっきり依存しているので、slangもデグレードしてやらないといけない。
- けれど、slangのデグレードはrpmとかのパッケージマネージャーに怒られるんで、どうしよう・・・。
- よく見たらlibslang1とlibslang2は分離していたので、libslang1だけVineLinuxのソースからビルドして差し替えようか。
- だけど、UTF-8なテキストがエディット出来ない問題は、棚上げだ。

<!-- dummy comment line for breaking list -->

- - - -
## Ｄｅｂｉａｎ（Ｅｔｃｈ ａｍｄ６４）のインストールはＯＫだった。
- もう３枚のＤＶＤ-Ｒを焼いた。
- しかし、インストールは最初の１枚だけで足りたようだ。
- パッケージ選択でエラーして赤い画面に行くことも無く、わりとフルインストール（２Ｇ強？）状態になってくれた。
- ｊｅｄを入れて、ＵＴＦ−８のテキストを編集してみた。
- おかしなことに、カーソルバック（＾Ｂ）は正しく全角単位にカーソルが動いてくれるが、
- カーソルフォワード（＾Ｆ）を打つと、常に文書末にジャンプする。
    - キガクルッテルノカ？
- ＡＳＣＩＩ文字のところはそんなことない。ちゃんと１字づつカーソル移動できる。
- Ｅｔｃｈは一応最新版なんだけど。
- ６４ビットだから駄目？そんなぁ・・・・。

<!-- dummy comment line for breaking list -->

- しかしあれですな。手持ちのＣソース、６４ビット版のｇｃｃだとこけるこける。
- 大半はポインタをintにコピーしているところ。これ多いんだよな。

<!-- dummy comment line for breaking list -->

- - - -
## ASUSTeK、「Eee PC 900-X」を実売49,800円で国内販売〜実売39,800円の701 SD-Xも
[http://pc.watch.impress.co.jp/docs/2008/0829/asus2.htm](http://pc.watch.impress.co.jp/docs/2008/0829/asus2.htm) 
- 何だ何だ？
- つい**ぽちッとな、**しそうになるじゃないか。
- これで英語キーなら、即買っちゃうぞ。

<!-- dummy comment line for breaking list -->

	>また、内蔵SSDの容量不足を補うため、30GBの外付けUSB HDDが付属する。
何だってー。
- 30GのUSB-HDDなんて、実は２台くらい持ってるけど
    - ノートＰＣ壊れる-->修理不能-->部品取り-->９８０円のＨＤＤケースに入れて外付けＵＳＢＨＤＤが増殖するの巻き。
    - おまけだから無くせないけど、もしもそれ無くせばもっと安く出来るわけか。すごいな。

<!-- dummy comment line for breaking list -->

但し、両方ともCele-Mの900MHzなんだな。**どういうこと？**
- Ａｔｏｍの供給が追いついてないのか、それとも・・・

<!-- dummy comment line for breaking list -->

- - - -
## こんどはＤｅｂｉａｎ（Ｅｔｃｈ ｉ３８６）をＶＭＷａｒｅ上にインストールしてみた。
- でも、jedのバグ
    - カーソルフォワード（＾Ｆ）を打つと、常に文書末にジャンプする。
- は直っていなかった。orz

<!-- dummy comment line for breaking list -->

- ちなみに、EtchをデフォルトインストールするとLANG=ja_JP.UTF-8になる。
- この状態で emacs , jed , vi をデフォルトのまま起動してみたが、
- UTF-8がまともに表示できるのはjedとviのみ。emacsはutf-8の日本語を正しく表示しない。
- jedはカーソル右が発狂しているので、どのみち使えない。
- ところで、lessはUTF-8をちゃんと表示できるようになっていた。（ARM版では出来なかった）

<!-- dummy comment line for breaking list -->

つまり、jedのカーソルバグは６４ビット固有問題ではなかったわけだ。

- - - -
## ＵＴＦ−８の字化けについて、さらに調べてみた。
- Debian Lenny (amd64)では、UTF-8の扱いが少し改善されている。

<!-- dummy comment line for breaking list -->

Etch 32bit版の各種テキストエディタの振る舞い（デフォルト状態で）
    - 編集テキスト＝ＵＴＦ８文書

<!-- dummy comment line for breaking list -->
|LANG|ja_JP.EUC-JP|ja_JP.UTF-8|
|Emacs -nw|漢字を表示できない|漢字を表示できない|
|Jed|ＵＴＦ８の漢字は<82><83>のようにおかしくなる|表示はＯＫ、カーソル移動に問題あり（＾Ｆは文書末に行く）|
|vi|ＵＴＦ８の漢字は激しく字化けして読めない|表示、カーソル移動共に問題なし|


Lenny 64bit版の各種テキストエディタの振る舞い（デフォルト状態で）
    - 編集テキスト＝ＵＴＦ８文書

<!-- dummy comment line for breaking list -->
|LANG|ja_JP.EUC-JP|ja_JP.UTF-8|
|Emacs -nw|表示、カーソル移動共に問題なし|表示、カーソル移動共に問題なし|
|Jed|ＵＴＦ８の漢字は<82><83>のようにおかしくなる|表示、カーソル移動共に問題なし（＾Ｆは直っている）|
|vi|ＵＴＦ８の漢字は激しく字化けして読めない|表示、カーソル移動共に問題なし|

- ちゃんと使うにはエディタ毎のいろいろなＴｉｐｓを覚えなければいけないんだろうけれど。

<!-- dummy comment line for breaking list -->


- ＥＵＣへの切り替えはコマンドライン上で

		$ export LANG=ja_JP.EUC-JP
- とやって、teratermの漢字設定をEUCに切り替えるという方法で試したが、
- 試し方が間違いなのか？（つまり、エディタ側の初期設定を何か変更する必要あり？？？）

<!-- dummy comment line for breaking list -->

- - - -
## アメリカ大統領選挙の行方
- [セーラ・ペイリンさんが共和党の副大統領候補になった](http://tomtom.iza.ne.jp/blog/entry/698314/) らしい。
- 政治家として若いし、眼鏡っ子萌え〜なＬｉｎｕｘｅｒが間違って投票するのかも。（いやそれはＬｉｎｕｘｅｒへの偏見だ！）

<!-- dummy comment line for breaking list -->

そんな冗談はさておき、気になっているのはやはり、アメリカの内線状態（ジョンタイターのいた時間線ではそうだ）と、女性大統領誕生のことだ。
- 共和党と民主党が拮抗していないか？（ブッシュｖｓゴアの選挙のときがほんとうに僅差だった。あのときはゴアが引いたので収まったが）
- マケインさんは高齢なので、もしかすると女性大統領ということになるのかもしれない。（量子的にどのくらいの確率？）
- ジョン・タイターが述べた女性大統領という話は、最初はヒラリーか、ライスのことだとばかり思っていたが、今回は伏兵だな。（ヒラリーの線は消えた。ライスもおそらくないだろう）
- とにかく、世界が各戦争により壊滅する未来を選択するのだけはなんとか回避してほしいと切に願う。

<!-- dummy comment line for breaking list -->


- - - -
## やっぱり９月は暴落かよ
- 天変地異（地震）
- テロ

<!-- dummy comment line for breaking list -->

量子力学的に起こりうる可能性があることはいつか必ず起こってしまうので怖い。
- 特に地震は、一種のぜんまい仕掛けの時限爆弾だから。
- 目下の注目点は９.１３前後とされている大地震だ。
- テロは、まあ大規模なやつは起きないと思うけど・・・どうだろう。

<!-- dummy comment line for breaking list -->

**＊米ソ冷戦再発の可能性、地政学的リスクが大きくなる可能性。**

で、ロシアは冷戦なのか。
- 今や協賛主義の国なんてなくなっちゃったので、イデオロギー対立で冷戦なんてありえない。
- つまり冷戦を演じて、誰か得する奴がいるわけだな。（ロシアとかの裏で糸を引いている奴）
- つ、武器商人？

<!-- dummy comment line for breaking list -->

最近の流行は[ロボ対ロボの戦闘](http://www.technobahn.com/news/2008/200808281840.html) になるらしい。

- - - -
## エレキジャックＮｏ８（２００８．９．４発売）はなんとＡＴｔｉｎｙ２３１３を含むマイコンチップが付録に！

[http://www.eleki-jack.com/news/2008/09/no8_1.html](http://www.eleki-jack.com/news/2008/09/no8_1.html) 

- マジかよ。
- 他にはＮＥＣ７８ＦとＨＣＳ０８（６８００系）とＴＩのＭＳＰ４３０もだ。

<!-- dummy comment line for breaking list -->

    - [http://www.freescale.co.jp/products/8bit/HCS08/9s08qg.html](http://www.freescale.co.jp/products/8bit/HCS08/9s08qg.html) 
    - [http://focus.tij.co.jp/jp/paramsearch/docs/parametricsearch.tsp?familyId=912&sectionId=95&tabId=1528&family=mcu](http://focus.tij.co.jp/jp/paramsearch/docs/parametricsearch.tsp?familyId=912&sectionId=95&tabId=1528&family=mcu) 
    - [http://www.necel.com/micro/ja/product/all_8_general.html](http://www.necel.com/micro/ja/product/all_8_general.html) 

<!-- dummy comment line for breaking list -->

- ほんとに今年は基板（電子部品付録）豊作年だ。
- 来年が不作でなければ良いが。

<!-- dummy comment line for breaking list -->

ＡＴｔｉｎｙ２３１３のＤＩＰ品なら、まだ１０個くらい手持ちがあるから要らない。
- 糞ＰＩＣが付いていなかったのはとても幸運だった。
- ７８ＫとＨＣＳ０８は正直要らないなぁ・・・
- というか、そんなマイコン、何に使うの？**教えて！**

<!-- dummy comment line for breaking list -->

~
~
~
~
~

おそらく、各マイコン用のＦｌａｓｈライターを作らなくちゃ始まらないので、~
- 自分の推理によると、**Ｆｌａｓｈライターを作る練習キットなわけですな。**

<!-- dummy comment line for breaking list -->

    - それか、各種**ＩＣＥデバッガの販促用**サンプルチップ詰め合わせ

<!-- dummy comment line for breaking list -->

## まだ雑誌を入手してないけど。
- ７８Ｋはおそらくトラ技８月号のＮＥＣ製Ｃコンパイラでコードを書けるだろう。
    - 焼き基板も付属しているとのことだ。
- ＨＣＳ０８は、６８００にスタックポインタ相対アドレスを付加したようなマイコンだ。
    - [ＣｏｄｅＷａｒｒｉｅｒ](http://www.freescale.co.jp/products/8bit/dvlp_tool.html) が対応しているらしい（無償）
    - 焼き方は不明。
- [ＭＳＰ４３０](http://focus.tij.co.jp/jp/docs/toolsw/folders/print/msp-cce430.html) のほうも、１６ｋＢまでの無償コンパイラ（Ｅｃｌｉｐｓｅ３.２ベースらしい）が用意されている。

<!-- dummy comment line for breaking list -->

ふーん。
- ７８Ｋは８０８５のそっくりさんで、ＨＣＳ０８は６８００にＳＰ相対を足しただけのマイコンなのに。
- もうアセンブラで書かなくてもいいわけね。~

<!-- dummy comment line for breaking list -->
**なんだか、つまんな〜い**（マゾかよ。）

- ７８Ｆ０５０３ＤＡはＦｌａｓｈ３２Ｋ、ＲＡＭ１Ｋ、Ｃｌｏｃｋ２０ＭＨｚらしいけど、これで合ってるのかな？
- ＨＣＳ０８（ＭＣ９Ｓ０８ＱＧ８）のほうはＦｌａｓｈ８Ｋ、ＲＡＭ５１２Ｂ、２０ＭＨｚだ。

<!-- dummy comment line for breaking list -->


- でも、６８００といえば、ＩＸが１本しかないわけで、memcpyすらまともに書けなかった（割り込み禁止でＳＰ使うのは無しよ）
- しょぼいアーキテクチャーなので、Ｃのオブジェクトは目も当てられんものになるだろうことは容易に想像がつく。
- なんやかんやいって、結局アセンブラ。
    - ゼロページ領域にmemcpyコードを展開しておいて
    - ポインタはＩＸしかないのでもう一つのポインタはＡＢＳアドレッシングのオペランドを直接インクリメントするのだ。
    - memcpyはそれで良いけど、それ以外の関数をいちいち命令書き換えで実装するのは**絶対嫌や**

<!-- dummy comment line for breaking list -->

- ＭＳＰ４３０Ｆ２０１３は、７８ＫやＨＣＳ０８よりもはるかにまともなＲＩＳＣアーキだが、
- Ｆｌａｓｈ２ｋ、ＲＡＭ１２８バイトとなっている。
- **ＡＴｔｉｎｙ２３１３とおんなじ容量かよ。**

<!-- dummy comment line for breaking list -->

### 結論として
- 自分にはどのマイコンも、**１個１００円のＡＴｔｉｎｙ２３１３以下**のように見える。
    - 反論したいなら、ＬｏｗＳｐｅｅｄでいいから、ＳｏｆｔｗａｒｅＵＳＢドライバーを書いて実証してくれ。
    - クロック数的に言うと７８Ｋはアウト。
    - レジスタ数的に言うとＨＣＳ０８もアウチ。
    - というか、どっちもＣコンパイラを使った瞬間に、ありえないコード量と遅さになるだろ。
    - ＭＳＰ４３０がギリギリ境界線だけど、２Ｋじゃあ厳しいねぇ・・・。
    - ドライバーだけで２Ｋ使い切るだろうなぁ。

<!-- dummy comment line for breaking list -->

- - - -
## Ｄｅｂｉａｎ（Ｅｔｃｈ ｉ３８６）の[ＶＭイメージを作成](http://psp.dip.jp/web/cgi-bin/wifky/wifky.cgi?p=VMWarePlayer) してウハウハ。
- VMWare Toolsまで入れてしまうと、時計はちゃんと合わせてくれるし、カーソル離せばウィンドウフォーカスも自動で変わってくれるので、だいぶ楽。
- Ｘ-Ｗｉｎｄｏｗのスクリーンサイズも、ＶＭＷａｒｅ窓のリサイズにあわせて自由に変わる。便利。

<!-- dummy comment line for breaking list -->

なのは良いけれど、一つ盲点があった。
- ＶＭイメージを作ったときのマシンがＡｔｈｌｏｎ６４だったので、Ｐｅｎｔｉｕｍ４のマシンだと**起動しねぇ！**

<!-- dummy comment line for breaking list -->
~
SIZE(64){orz}。
~
~
~

- ｉ３８６汎用カーネルに差し替えたｖｍｌｉｎｕｚを入れてｇｒｕｂで選択するしかない。

<!-- dummy comment line for breaking list -->

- - - -
## ＤＥＬＬのミニノート：Inspiron mini 9発表
[http://pc.watch.impress.co.jp/docs/2008/0905/dell1.htm](http://pc.watch.impress.co.jp/docs/2008/0905/dell1.htm) 
- 英語キーボード、**キター**
- あともう半年もすれば、ＳＳＤはＨＤＤに比べて圧倒的に速く快適になるはずだ。
- ＳＡＴＡ２インターフェースで良いので、ＳＳＤを抜き差し可能なスロットに入れて欲しいような気がする。（昔のＮＥＣ９８ノートのＨＤＤみたいな感じで）
- そうすると、Ｕｂｕｎｔｕの６４ビット版にしたりＸＰに戻したりが楽だ。
- ＶＭＷａｒｅでも良いんだけれど、ＳＳＤの容量的に両方のＯＳを入れるのは（現時点では）無理。
- 今のＳＤメモリーカードみたいなフラッシュメモリーインターフェースがＳＡＴＡ並みに速くなるのであれば、ＳＤカードスロットだけ用意して、ＳＳＤレスであっても良いくらいだ。
- 実際には、そうなることは難しい。なぜならインテルの高速ＳＳＤはインテリジェントな並列コントローラと、複数のＦｌａｓｈモジュールの組み合わせでやっと実現しているからだ。

<!-- dummy comment line for breaking list -->

それから、どうでもいいけどＡｔｏｍの液晶サイズ縛りなんか意味ないんでやめて欲しい。
- 図書館とかパブリックスペースに置かれるＰＣなんか、全部Ａｔｏｍにしてしまってもいいくらいだ。
- ついでに９４５の後継（低消費電力化）は絶対必要。
- mini 9のチップセットはDELLの英語サイトのTech Specsには、965PM/GM Express(GMA950)と書かれていたが、

<!-- dummy comment line for breaking list -->
これって945GMの間違いではないんだろうか？965だとGMA3000になるが、**さらに爆熱だ**

- - - -
## ７８Ｋのアセンブラって存在するの？
[http://john.ccac.rwth-aachen.de:8000/as/](http://john.ccac.rwth-aachen.de:8000/as/) 
- 探していたら、こんなサイトに辿り着いた。
- これって１本のアセンブラでアンティークな全ＣＰＵを網羅しているよね。
- ＳＣ/ＭＰがあった。感激した。
- ソースの拡張子はＣなんだけど、最初見たらＰａｓｃａｌかと思った。

<!-- dummy comment line for breaking list -->

[http://john.ccac.rwth-aachen.de:8000/alf/](http://john.ccac.rwth-aachen.de:8000/alf/) 
- ドイツの人らしいです。

<!-- dummy comment line for breaking list -->

とある２ｃｈの会話より
	15 ：774ワット発電中さん：05/02/18 16:29:21 ID:K0GntvF8
	>>14 
	78KのPIC/AVRと比較しての優位点ってなんかある？ 


	16 ：774ワット発電中さん：05/02/18 17:20:51 ID:Jb4jtAy/
	・PIC/AVRほど語り尽くされていないから面白みがある 
	・PICのような変態アーキテクチャではないから気分的に楽 
	・レジスタ構成が懐かしい〜A/B/C/D/E/H/L・・・あれ？ 
	・ドライバコンフィギュレータ（Applilet：Applilet EZとは別物）が 
	　初期化やらライブラリのソースコードを自動生成してくれるのが便利 
	・外部発振器不要 
	・全品種にA/Dコンバータ内蔵 
	・NEC純正Cコンパイラ無料 
	・LEDやスイッチ、ボリュームなどを付けたイメージで 
	　動作シミュレーションできるシミュレータ（無償） 
	http://www.necel.com/micro/product/sc/lowpin/ 
わろた。

- - - -
## ＤＥＬＬのミニノート：Inspiron mini 9
- ファンレスらしい。
- ＥｅｅＰＣの爆熱っぷりを見ているので、低音やけどとか大丈夫？
- なんか秘策があるのかな？

<!-- dummy comment line for breaking list -->

とりあえず
- 英語キーが選べる。
- ファンレス~

<!-- dummy comment line for breaking list -->
ここまではＯＫ。大変結構。でも~
- 発熱具合ってどうなの？
- カラーバリエーションはどうなったの？
    - 英語モデルでは白のほうが高いんだけど・・・
- 電池の持ちが期待したより普通。

<!-- dummy comment line for breaking list -->

インテルのＳＳＤ搭載モデルまで待つか・・・

- - - -
- DELLの日本語サイトに仕様詳細が出ていた。
- チップセットは945GSE Expressとなっている。
- ちなみに、Atomのチップセットはintelサイトによると

<!-- dummy comment line for breaking list -->
|ネットブック | モバイル インテル 945GSE Express チップセット |
|ネットトップ | インテル 945GC Express チップセット |
ということになっている。

- - - -
## エレキジャックＮｏ８を買ってしまった。
- ７８Ｋ、ＭＳＰ４３０、ＨＣＳ０８、ＡＶＲとマイコンてんこ盛り
- だけど作るものがない。
- しかたがない、ライターでも作るか。

<!-- dummy comment line for breaking list -->

とある２ｃｈの会話より。
	40 名前：774ワット発電中さん 投稿日：2008/06/10(火) 00:33:42 ID:epyTo3qj
	PIC/AVRを始めることにした。まずはライタを作らないと。 
	
	ライタ作った。さて、何を作ろうか。 
	
	…作りたいモノがない!! しかし、何か作らねば…。 
	
	そうだ、新しいライタを作ろう。 
**↑丁度今ココ。**

- ちなみに、７８Ｋはシリアル経由でＷｒｉｔｅＥＺ３というツールから書き込み出来るらしい。
- ＨＣＳ０８を焼いたりデバッグしたりするツールＵＳＢＳＰＩＤＥＲは４２００円くらいで売っている。
- ＭＳＰ４３０を焼いたりデバッグしたりするツールｅｚ４３０−Ｆ２０１３は３５００円で売っている。
- ＡＶＲはＣＨａＮさんのシリアルライターで簡単に焼けると思う。（制作済）

<!-- dummy comment line for breaking list -->

わざわざＵＳＢＳＰＩＤＥＲとかを買うまでもないし、買ってもたぶん（ＨＣＳ０８の）使い道がないわけで。
- やっぱり他のマイコンでＨＣＳ０８かＭＳＰ４３０**焼き器を作るまでが遠足**だな。
- 出来てしまったらすることが無くなる。
- で、出来上がったＨＣＳ０８でＡＶＲライターを書くとか・・・（人生無限ループだ）

<!-- dummy comment line for breaking list -->

## ＤＥＬＬのミニノート：Inspiron mini 9 の別の可能性
- Ｌｉｎｕｘ（Ｕｂｕｎｔｕ）搭載を前面に出したノートＰＣって、他にあったっけ？
- これは、市場実験（ユーザーアンケート）のようなもので、
- モバイルデバイスに必ずしもＷｉｎｄｏｗｓが必要かどうかをユーザーに問うている。

<!-- dummy comment line for breaking list -->

**Ｕｂｕｎｔｕでも十分に利用できると分かった時点でどうなるか予想してみよう。**
- Ａｔｏｍいらないじゃん。ｎＶｉｄｉａのＴｅｇｒａ（ＡＲＭとＧＰＵ統合チップ）でもＵｂｕｎｔｕくらいは走る。（ちょっと遅いかもね）
- だったら、バッテリーの持ちは劇的に伸びるし、爆熱の心配もない。
- もっと安く出来る。
- ＷｉｎｄｏｗｓＸＰの供給も止まるので、好都合。
- 今後糞Ｖｉｓｔａに移行するくらいならＵｂｕｎｔｕのほうが好いよね。

<!-- dummy comment line for breaking list -->

逆に、Ｕｂｕｎｔｕモデルが受け入れられない場合は、Ｔｅｇｒａの線は無しってことで。

- - - -
## Intel、10chアクセスで高速化したSSDを出荷開始
[http://pc.watch.impress.co.jp/docs/2008/0909/intel1.htm~](http://pc.watch.impress.co.jp/docs/2008/0909/intel1.htm~) 
[http://japanese.engadget.com/2008/09/09/ssd-x25-m-80gb-595/](http://japanese.engadget.com/2008/09/09/ssd-x25-m-80gb-595/) 
- ８０ＧＢ。千個受注時の単価は65,760円。

		　主な仕様はほぼ共通で、容量が80GB、インターフェイスはSATA(3Gbps)、
		サステインドリードが最大250MB/sec、サステインドライトが最大70MB/sec、
		リードレイテンシは85μsec。消費電力はアクティブ時が0.15W、アイドル時が0.06W。
- **速っ。**（まあ、メモリーだからな。）
- ＮｅｔＢｏｏｋ１台分より高いじゃん。
- こいつはむしろ、エンタープライズサーバー用だな。
- Ｏｒａｃｌｅとか動かしている所は、喉から手が出るほど欲しかった速度だろう。
- ＨＤＤなら、１秒にせいぜい７０回くらいしかランダムリード出来ないが、（秒速高々１２０回転なので）
- ＳＳＤは、何千回でもＯＫだから。

<!-- dummy comment line for breaking list -->

フラッシュがＭＬＣでこの値段なので、ＳＬＣだと倍額くらい？
- １６０ＧＢだと、ＶＡＩＯノートが１台買えますな。

<!-- dummy comment line for breaking list -->

- - - -
## ＡＲＭ吼える
[http://pc.watch.impress.co.jp/docs/2008/0910/arm.htm](http://pc.watch.impress.co.jp/docs/2008/0910/arm.htm) 
- ARM、IntelによるAtom優位の主張に強く反論
- そりゃまあ、２次キャッシュＯＦＦで計測されたら怒るのも当然だよな。
- ＡｔｏｍもＡＲＭもシングルスカラーならば同一クロックでほぼ同速度じゃあないかとは思っていた。
    - ＣｏｒｔｅｘＡ８はin-order実行の２イシューなのでＣｌａｓｓｉｃＰｅｎｔｉｕｍ相当だ。
    - まあＡｔｏｍともよく似ていること。
    - レジスタ数の多さで言うとＡＲＭのほうが速いと思うが、ＳＳＥ周りはインテルのほうが何枚も上手だ。
    - ＨｙｐｅｒＴｈｒｅａｄｉｎｇの有無の違いはある。（つまりＨＴ　ＯＮの状態ではＡｔｏｍ有利）

<!-- dummy comment line for breaking list -->

- 記事によると７６８ＭＨｚのＣｏｒｔｅｘＡ８は１.６ＧのＡｔｏｍより２５％遅いらしい。（まあ用途によるだろうけど）
- 一番いいのは市場がすべてを決めることだ。
- まず、ＡｔｏｍはＩＰコアで提供されることはありえないので、今のＡｔｏｍがＡＲＭ市場に殴りこむことは不可能。
- そのまえにチップセットをなんとかしる。＞インテル
- 繰り返すようだが、Ａｔｏｍの市場はＷｉｎｄｏｗｓＸＰ搭載のＮｅｔＢｏｏｋ限定なのだから、Ｕｂｕｎｔｕで十分な用途向けにはどんどんＡＲＭ内蔵のＮｅｔＢｏｏｋを作ればよいだけだ。
- それが市場に受け入れられなかったなら（Ｘ８６互換の）Ａｔｏｍが自動的に勝つ。

<!-- dummy comment line for breaking list -->

- - - -
## ＨＩＤａｓｐ高速化の可能性
[ＨＩＤａｓｐ高速化](ＨＩＤａｓｐ高速化.md) 

- - - -
## インドの少女、欧州での「ビッグバン実験」を恐れ自殺
- [http://jp.reuters.com/article/oddlyEnoughNews/idJPJAPAN-33702120080911](http://jp.reuters.com/article/oddlyEnoughNews/idJPJAPAN-33702120080911) 

<!-- dummy comment line for breaking list -->

LHCで極小ブラックホール生成実験を行っても地球は消滅しない、CERN
- [http://www.afpbb.com/article/environment-science-it/science-technology/2514698/3302185](http://www.afpbb.com/article/environment-science-it/science-technology/2514698/3302185) 

<!-- dummy comment line for breaking list -->

そもそもＬＨＣでブラックホールが作れるなんていう「世間の注目を集める」ニュースを流すのが間違いだったのか。
- 基本的にはＨｉｇｇｓを見つけるための実験施設なのだ。
- 注目を集めて予算獲得しやすくする効果もあると思うけれど、物理学に詳しくない人たちを無意味に不安がらせるような宣伝もどうかと思う。
- 深読みすると、それを知ったインドの天才少女が、本当に事故が起きる可能性を計算した結果自殺、だったら凄いけれど。
- あとね。ＣＥＲＮの施設の写真は、まるで波動砲の発射装置みたいで怖い感じがするんだけどね。たいていあの手の大げさな機器は（生成した素粒子の軌跡や熱量を測る）検出器なんだよね。
- だから、**怖くはないんだぉ。**

<!-- dummy comment line for breaking list -->


面白いところでは、こんなニュースもあるし。
- [LHCでゴードン・フリーマン博士目撃、不測の事態の可能性](http://japanese.engadget.com/2008/09/10/lhc-gordon-freeman-half-life/) 

<!-- dummy comment line for breaking list -->

- - - -
## ＤｉｒｅｃｔＸでプログラムを書いてみようかと。
気の迷いからだが。~
で、
- いや、普通にＯｐｅｎＧＬで書くようなことをＤｉｒｅｃｔＸで書くことが出来ないかという。
- そうすると、Ｃ＋＋とかクラスとか難しいことを覚えなくて良いので。
- 別にクラスを使うことは難しくないが、たとえば、Ｘファイルの読み込みが

		D3DXLoadMeshFromX("hoge.x" ...)
- で、描画が

		for(...)
		 pMesh-&gt;DrawSubset( i );
- だなんて言われた日には、まるで「**おまえら何も分からんでいいからＶｉｓｕａｌＢａｓｉｃでも使ってろ**」と言われているのと同じだ。

<!-- dummy comment line for breaking list -->

じゃあ、自力でＸファイルを読んで、DrawPrimitive()してみろと。
- というわけでＸファイルの解析を始めたわけだが、
- なんかだめだめフォーマットなんだなこれが。
- 特にＸバイナリーなんて、元のテキストをトークン番号に置換しただけのテキスト並びのまんまじゃないか。
- しかもＤｉｒｅｃｔＸ１０ではＸファイルが扱えなくなっているというし。

<!-- dummy comment line for breaking list -->

すなおにＯｐｅｎＧＬで書いたほうがマシなのはわかっている（つもり）

- - - -
#### いろいろ検索していたら２ｃｈに当たってしまった。
Xファイルを再生するスレ
- [http://pc11.2ch.net/test/read.cgi/gamedev/1006624202/](http://pc11.2ch.net/test/read.cgi/gamedev/1006624202/) 

<!-- dummy comment line for breaking list -->

- 何に困っているかというと、３Ｄモデルの適当なフォーマットが「存在しない」ことなのだ。
- モデリングソフト毎に独自のフォーマットが存在するが、それは(面倒なので)扱いきれない。
- 割とポピュラーなフォーマットとしては
    - DXF(AutoCAD)
    - 3DS(AutoDesk 3D Studio)
    - obj(WaveFront)
    - FBX(AutoDesk)
    - Collada(SCEA)
    - VRML / X3D (Web3D)
    - Xfile / SDKMesh (DirectX)

<!-- dummy comment line for breaking list -->

- 特定のモデラーを持っているならそれに近いものを使えば良いが、
- どのモデラーでもサポートされていそうなフォーマットというとかなり限定される。

<!-- dummy comment line for breaking list -->

で、
- ＸファイルはDirectXで最も知られたフォーマットなので、対応モデラーは多くて良いのだが、
- 書けるくせに（Ｘファイルを）読めないモデラーが多いのがまた、困り者だ。
- そのくせ、（Ｘファイル以外での）適当な共通フォーマットがないんだな。

<!-- dummy comment line for breaking list -->

- - - -
## ＨＩＤデバイスのアクセス方法について誤解していた。
- SIZE(8){また恥をかいてしまった。}
- ＨＩＤデバイスというのは、単にディスクリプタのテーブルが拡張されただけのものかと思っていた。
- ところがReadFile()やWriteFile()で転送されるのは、生パケットではなく、レポートディスクリプタというやつらしい。
- 転送サイズは９を指定するのだが、その９バイトバッファの先頭の１バイトはREPORT_IDに割り当てられていて、しかも０ｘ００固定だ。
- 実際に転送されているパケットは９バイトのうちの後ろ８バイトのようだ。
- これを長くすることが出来ないと、帯域を稼ぐこともできないっぽい・・・。
- なんかlibusbと全然違うんだな。
- HID.DLLにはベンダー独自リクエストを直接送信するような呼び出しはないのかな？
- ReadFile() WriteFile()はブロックされるので、個別に制御するなら別スレッドにするという話だが、
- HIDというかUSBのパケットなのに、なんでもReadFile()関数に押し付けるのは強引だと思った。

<!-- dummy comment line for breaking list -->

参考ＵＲＬはこのへん？~
すｚのAVR研究
- [http://suz-avr.sblo.jp/article/8636190.html](http://suz-avr.sblo.jp/article/8636190.html) 

<!-- dummy comment line for breaking list -->

Obtaining HID Reports / HidD_GetFeature
- [http://www.osronline.com/DDKx/intinput/hidclass_6xpj.htm](http://www.osronline.com/DDKx/intinput/hidclass_6xpj.htm) 

<!-- dummy comment line for breaking list -->

- - - -
## avrspxがWindows2000上でHIDaspを認識してくれない件
- avrspxのhidasp_init()内でハングすることが多い。
- testパケット（pingのようなエコーバックパケット）を４回送り、受信を行っているが、
- Windows2000上では、２つくらいしか返却されてこない。
- １回送り、１回受け取るように書くとOK.
    - これはsenshuさんのHIDspx.exeの実装で修正されている。
- WindowsXP上で同じことをすると、４パケットのうちの最初のパケットだけが欠落する。
    - 但しこの現象はHIDaspをUSBに接続した直後だけに発生する。
    - SnoopyProでデバイスリセットを行った直後にも良く発生することが多い。
- Windows2000, WindowsXPの両方でSnoopyProを見ながらやってみたのだが、原因を掴むには至っていない。

<!-- dummy comment line for breaking list -->

- やりにくいのはHID Reportの送受信がReadFile() WriteFile()という

<!-- dummy comment line for breaking list -->
Windowsのブロック関数でやらなければならない点だ。
- これは、rs232cの簡易ターミナルを書いたときも相当いらついた。
    - 非同期リード、ライトにしたければ、CreateFileでFILE_FLAG_OVERLAPモードオープンして、
    - ReadFileの最後の引数にOVERLAPPED構造体を与えてやるとかしないといけない。

<!-- dummy comment line for breaking list -->

- あと、HID Reportがどのようなパケットなのか本質を理解していないのが問題。
    - マウスならボタン情報、座標などが含まれるようなパケットらしい。
- SnoopyProで見るとインタラプト転送のように見える。
- Microsoftのドキュメントではコントロール転送でもいけるというふうな解説が書かれているので混乱している。
- もしも（ＬｏｗＳｐｅｅｄ）インタラプト転送なら、速度を望むことは絶望的だ。

<!-- dummy comment line for breaking list -->

- - - -
## HIDsphを研究しておくべきだった。
- ソースがかなり洗練されている。
- AVRUSBのAVR Bootloader HID がベースになっているようだ。
- HID Reportの送受には ReadFile()/WriteFile()ではなく HidD_GetFeature()/HidD_SetFeature()で行われている。

<!-- dummy comment line for breaking list -->

- やっぱり[AVRUSB](http://www.obdev.at/products/avrusb/index.html) で紹介されているリファレンス実装は一通り見ておくべきだと思った。どれもレベルが高い。

<!-- dummy comment line for breaking list -->

- ATmega88は秋月で＠250円なので、もう2313にこだわらなくてもいいかなと。

<!-- dummy comment line for breaking list -->

- - - -
## HIDsphを実際に焼いてみた。

HIDspxのHidD_SetFeature()改造版を作ってみたもののHidD_SetFeature()が常に失敗するので、
比較対象が欲しかった。

- テスト基板が普通のAVR-USB接続だったので、PortD,4,3の設定をPortD,3,2に変更。
- INT1になっていたのでINT0に変更。
- ATmega8だったのでATtiny2313に。そしてbootloaderのスタートが1800だったのを0に。
- 同梱exeを使って接続のみ確認。

<!-- dummy comment line for breaking list -->

次にHIDspx-srcのソースのReadFile()/WriteFile()をHidD_GetFeatur()/HidD_SetFeature()
に置換したソースで接続を確認。
- WindowsXPで正しくハンドシェイクされている。
- USB挿抜直後でも正しくハンドシェイクされていることを確認。

<!-- dummy comment line for breaking list -->

SnoopyProで見ると、HIDaspターゲットに対する挙動とかなり違う。
- HIDaspターゲットでは、インタラプト転送のような挙動でデバイスから勝手に送られてくる感じ。
- HIDsphターゲットでは、すべてコントロール転送（クラスリクエスト）になっている。

<!-- dummy comment line for breaking list -->

HIDディスクリプタの内容が双方でかなり違うのでこうなるのだろうか・・・~

- Report IDは1,2以外はダメ。
- サイズはGetDevCaps()で取得できないのであとで代入しているがその値は7以上でないとダメ。

		PROGMEM char usbHidReportDescriptor[42] = {
		   0x06, 0x00, 0xff,              // USAGE_PAGE (Generic Desktop)
		   0x09, 0x01,                    // USAGE (Vendor Usage 1)
		   0xa1, 0x01,                    // COLLECTION (Application)
		   0x15, 0x00,                    //   LOGICAL_MINIMUM (0)
		   0x26, 0xff, 0x00,              //   LOGICAL_MAXIMUM (255)
		   0x75, 0x08,                    //   REPORT_SIZE (8)
		   0x85, 0x01,                    //   REPORT_ID (1)
		   0x95,    6,                    //   REPORT_COUNT (6)
		   0x09, 0x00,                    //   USAGE (Undefined)
		   0xb2, 0x02, 0x01,              //   FEATURE (Data,Var,Abs,Buf)
		   0x85, 0x02,                    //   REPORT_ID (2)
		   0x95,    7,                    //   REPORT_COUNT (7)
		   0x09, 0x00,                    //   USAGE (Undefined)
		   0xb2, 0x02, 0x01,              //   FEATURE (Data,Var,Abs,Buf)
		   0x85, 0x03,                    //   REPORT_ID (3)
		   0x95,   38,                    //   REPORT_COUNT (38)
		   0x09, 0x00,                    //   USAGE (Undefined)
		   0xb2, 0x02, 0x01,              //   FEATURE (Data,Var,Abs,Buf)
		   0xc0                           // END_COLLECTION
		};
- Report IDの2,3の使い道が良く分からない。
- 2,3を削除すると無反応になる。
    - （#define USB_CFG_HID_REPORT_DESCRIPTOR_LENGTH 42　は書き換えたつもり）

<!-- dummy comment line for breaking list -->

- - - -
## [ＨＩＤａｓｐ高速化](ＨＩＤａｓｐ高速化.md)
ここ２日くらい、いろいろ試行錯誤してみた。
- ＨＩＤ　Ｒｅｐｏｒｔの送り方と受け取り方が分かった。
- 全てコントロール転送（クラスリクエスト）で実行されているような気がする。
- ただし、まだよくわかっていないのが、Ｒｅｐｏｒｔ　ＩＤの置き場所についてだ。
    - コントロール転送のDOWNストリームデータ（つまり後続パケット）の先頭にあるのか、
    - それとも、クラスリクエスト内にあるのかが掴みきれていない。
    - デバイスからホストへのＵＰストリームにおいては間違いなく後続パケットの先頭バイトだと思う。

<!-- dummy comment line for breaking list -->

- それから、ディスクリプタに書かれたＲＥＰＯＲＴ＿ＣＯＵＮＴの値と、ＵＳＢの生パケットのサイズの対応も正しく把握しきれていない。あやふやなのだ。
    - まあ、動いているからいいや、では駄目だ。

<!-- dummy comment line for breaking list -->

- ＨＩＤはドライバーインストールが不要なので、ユーザーに勧めやすい。
- オーバヘッドが多少増えるが、libusbでコントロール転送の生パケットをコーディングするよりもある意味楽かもしれない。
- ふつうのＨＩＤクラス（ＫＢ、マウス、ＪＯＹ等）を書いてみようという気になったのも収穫の一つ。

<!-- dummy comment line for breaking list -->

ATtiny2313の２ｋＢ内でも、思ったよりいろいろ詰め込めそうだ。


- - - -
## ＡＴｔｉｎｙ２３１３のＵＳＩ（ＳＰＩ）
- ＡＴＭＥＬのＰＤＦを読む。

		アセンブリ言語プログラム例
		SPIM: OUT USIDR,R16 ;送信データを設定
		 LDI R16,(1&lt;&lt;USIOIF) ;USIOIFビットのみ1値を取得
		 OUT USISR,R16? ;フラグ解除/カウンタ初期化
		 LDI R16,(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USICLK)|(1&lt;&lt;USITC) ;3線動作クロック生成値を取得
		;
		SPIM_LP: OUT  USICR,R16  ;SCKクロック エッジ発生
		 SBIS USISR,USIOIF ;オーバーフローでスキップ
		 RJMP SPIM_LP ;オーバーフローまで継続
		;
		 IN R16,USIDR ;受信データを取得
		 RET ;呼び出し元へ復帰
- 2行目と3行目の命令はカウンタ オーバーフロー割り込み要求フラグ(USIOIF)をクリア(0)し、USI 4ビット カウンタ値をクリア(=0)します。
- 4行目と6行目
- の 命令は3線動作、立ち上りエッジ シフト レジスタ クロック、USITCストローブ計数、SCK出力交互切り替え(PORTB7)を設定 し ます。このルーフ
- は16回繰り返されます。

		次のコードは最高速(fclk/2)でのSPIマスタとしてのUSI部使用法を実際に示します。
		アセンブリ言語プログラム例
		SPIM_F:? OUT? USIDR,R16? ;送信データを設定
		? LDI? R16,(1&lt;&lt;USIWM0)|(0&lt;&lt;USICS0)|(1&lt;&lt;USITC)? ;3線動作初期値を取得
		? LDI? R17,(1&lt;&lt;USIWM0)|(0&lt;&lt;USICS0)|(1&lt;&lt;USITC)|(1&lt;&lt;USICLK)? ;3線動作クロック生成値を取得
		;
		? OUT? USICR,R16? ;MSB転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット6転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット5転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット4転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット3転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット2転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;ビット1転送
		? OUT? USICR,R17? ;
		? OUT? USICR,R16? ;LSB転送
		? OUT? USICR,R17? ;
		;
		? IN? R16,USIDR? ;受信データを取得
		? RET? ? ;呼び出し元へ復帰
- なるほど。usi_trans()は、８ビットの転送に１６回ループを回るのだ。
- しかも１バイトの書き込みにはusi_trans()を４回呼ばなければならない。
    - （シリアルプログラミングのＳＰＩコマンドはすべて４バイト単位）
- ＡＶＲ書き込み時に与えるＳＣＫのＬＯＷ区間、ＨＩＧＨ区間はＣＰＵ　ＣＬＯＣＫの３クロック時間より長くなければならない（１２ＭＨｚ以上動作のとき）
- これを満たすためには、（仮にＬＯＷ＝４ＣＬＫ、ＨＩＧＨ＝４ＣＬＫとすると）１２ＭＨｚのＡＶＲを焼くためにはＳＣＫは１.５ＭＨｚ以下でないとだめという感じかな。
- ということは、上記のループ展開したようなＳＰＩ転送だと６ＭＨｚになるので速すぎる。
- delay()を外した状態のusi_trans()のｇｃｃコードが丁度上記の最初のコード例になるので、

<!-- dummy comment line for breaking list -->
１２ＭＨｚのＡＶＲを焼く場合の限界速ということになりそうだ。
- この頃はＡＴｍｅｇａ８８の２０ＭＨｚ基板を焼いているので、なんとか間に合っているようだ。
    - 焼いているというのが、単に**焼き速度のベンチマーク**をしているだけ、というところがむなしいけど。
- - - -
## ＵＳＢの接続変更
- ＵＳＢのＤ＋をＰＤ３
- ＵＳＢのＤ−をＰＤ４
- に接続するのが流行りらしい。
- とりあえず、ターゲットボードの配線だけは変えた。
- usbdrv/を最新と取り替えて、usbconfig.hもＰＤ３，４に合わせた。
- しかし、コードサイズがあっというまに１００バイト以上溢れ返ってしまった。

<!-- dummy comment line for breaking list -->

~
SIZE(24){何故？}
~
わっかりーませーーん。降参です。

## はっはっはっ分かってしまえば簡単だ。
	#define USB_CFG_HAVE_INTRIN_ENDPOINT    1
こいつが１になっていただけだった。これで１００バイトくらい増える。
- どうやって調べたかって？そりゃ、双方のdisasmを比較したのさっ。

		avr-objcopy -j .text -j .data -O ihex main.elf main.hex
		bash checksize main.elf 2048 128
		ROM: 1956 bytes (data=4)
		RAM: 93 bytes
- ↑今ここ。
- これで、流行に乗り遅れないぞっと。

<!-- dummy comment line for breaking list -->

ちなみに、ＨＩＤ　Ｒｅｐｏｒｔの取得や書き込みは全てコントロール転送で完結しているっぽいので
（ＳｎｏｏｐｙＰｒｏで見ただけだけど）クソ遅いインタラプト転送なんて、使わないぞっと。

## ＨＩＤａｓｐ高速化改良（方法論のみ）
- ＨＩＤｓｐｘ−ｓｒｃに含まれているhidasp.c には、ＨＩＤ　Ｒｅｐｏｒｔのパケットをダンプするデバッグ機能がついている。

		#define PKTDUMP 0	    // HID Reportパケットをダンプする.
- これを 1 にして作成したＥＸＥで書き込み＆ベリファイを行うと、どのようなＨＩＤパケットが飛び交ったかがコンソールに表示される。
- 次に、これをＯＦＦにしておいて、[ＳｎｏｏｐｙＰｒｏ](http://sourceforge.net/projects/usbsnoop/) でＵＳＢパケットをキャプチャーする。
- HIDspx.exeで同じように書き込み＆ベリファイを行ってみる。
- ＳｎｏｏｐｙＰｒｏのログにはそのパケットが送られた時間が記録される。１ｍＳが１フレームと考える。
- そして、ａｖｒｓｐｘのソースを見ながら、どのようなことが起こっているのかを想像すればよい。

<!-- dummy comment line for breaking list -->

速くしようと思えば、無駄なパケットを減らすことと、ＨＩＤ　Ｒｅｐｏｒｔを６４バイトにまで拡張することと、usbFunctionWrite()に８バイト来た時点で行動を起こすことだ。
- usbFunctionWrite()では、８バイト単位で処理を行い、ＳＰＩ経由でデータを送ってしまうことが出来るので、ＲｅｐｏｒｔＢｕｆは長く取る必要がない。最初に来た８バイトのヘッダー部分だけ覚えておけばいいはずだ。
- アドレスセットとページライト、書き込みまでをその長いパケットに全部含めてしまえばさらに無駄は減るが、ちょっとやりすぎかもしれない。

<!-- dummy comment line for breaking list -->



- また、読み込みも速くしたければ、ページリードのコマンドは省略してしまい、長いＨＩＤ　Ｒｅｐｏｒｔの要求が来たら、さっさと固定長でページリードを行なってしまえばよい。端数に関してだけ、従来どおりページリードコマンドでサイズを指定して転送してもらうようにする。
- これも８バイト単位で並列処理させると良いかもしれない。
- ページリード以外のコマンドは結果が７バイトで足りるので、長いＲｅｐｏｒｔ要求を出すことはないはず。

<!-- dummy comment line for breaking list -->

書き込みターゲットのクロックが遅い場合はどのみち速くすることは出来ないので、高速化の対象は８ＭＨｚ以上で動作しているＡＶＲチップに限定すれば、上記のような戦略が有効だと思う。

- しかし、上記の手法はやややりすぎの感もある。
- 手持ちのｍｅｇａ８８に５秒程度で書き込み＆ベリファイが出来るのならそれで充分だし
- ｔｉｎｙ２３１３に書いていた頃は、昔のままでも遅いと思ったことはなかったのだから。

<!-- dummy comment line for breaking list -->



## パソコン起動不可-＞復旧完了。
- 今朝からパソコンが起動しなくなった。
- 立ち上げるといきなりリセット。
- もう１回たちあげて、１分くらい作業したらまた勝手にリセット。
- ついに立ち上がらなくなった。メッセージは

		C:\WINDOWS\SYSTEM32\CONFIG\SYSTEMが壊れているか読めません。
		インストールＣＤを入れて立ち上げてＲを押してください。
- みたいなやつ。
- 最初はメモリーを疑った。ＭＥＭＴＥＳＴ８６に掛けたが７周しても問題なし。
- 次にＨＤＤを疑った。幸い容量ＵＰの交換前ＨＤＤが残っていたのでそちらで立ち上げて

<!-- dummy comment line for breaking list -->
ＣＨＫＤＩＳＫは無問題。
- やっぱりCONFIG/SYSTEMの問題かと思って、正常起動するほうのSYSTEM（システムレジストリファイル）

<!-- dummy comment line for breaking list -->
を上書きしてみたら、こんどは起動するがログイン画面に来ない。
- はたと思いついて、Windows/repair/SYSTEM という、インストール直後に作成されるシステムレジストリファイルのバックアップを上書きしてみると、幸運にもＯＳが起動するようになった。
- 但し、起動直後は、まるでインストール直後のような、ドライバー初期状態だったので、適当にドライバーを入れて対処。
- ユーザーレジストリは無事だったようだ。完全に復旧。

<!-- dummy comment line for breaking list -->

一件落着。

- Ｗｉｎｄｏｗｓ９８時代は、このようなトラブルが日常だったので、Ｃ：ドライブにはＯＳのみを入れるという癖がついている。
- さらに、ＯＳのパーティションを３つ同じ容量で切って、Ｗｉｎｄｏｗｓ９８の安定した状態のＣ：のコピーを３個持って運用していた。
- ブート切り替えはＣｈａＮさん作のＭＢＭというブートローダーだ。
- これはパーティションの細かな設定やパーティションコピー、ドライブ間コピーなどができる頼もしい奴。
- もっとも、今ではそのような用途に特化したＬｉｖｅＣＤ Ｌｉｎｕｘがいくつか存在するようだ。

<!-- dummy comment line for breaking list -->

こういうことが年に１回くらいはあるので、ＯＳの起動パーティションは常に３つ切っていて、レスキュー用の仮ＯＳはいつでもインストール可能状態にしている。
- （もちろんＫｎｏｐｐｉｘとかでも最近はＮＴＦＳをマウントして書き込みまで出来るのだが、壊れたＷｉｎｄｏｗｓの障害状況を見たり、ファイルを比較したりといったことまでやるなら、そっくり同じＯＳを別パーティションに入れるにこしたことはない。）

<!-- dummy comment line for breaking list -->

## ＨＩＤａｓｐ：時には諦めも肝心？

- 例のusbFunctionRead()に引っ掛けて８バイトづつちまちま転送したらどうなるかテスト.
- ＨＩＤ　Ｒｅｐｏｒｔ長はついに１２６バイト。（ＳｎｏｏｐｙＰｒｏで確認したから間違いない）

		bash-2.02$ time ./hidspx.exe -rp &gt;1
		Detected device is ATmega88.
		Read    Flash: 8192/8192 B
		Passed.
		#
		real    0m1.712s
		user    0m0.015s
		sys     0m0.000s
- ８ｋＢ全読みはＳＰＩ転送を端折ると0.8秒で終わる（ＵＳＢ転送だけだ。つまり１０ｋＢ／Ｓはちゃんと出ている）
- delay()ループを削除した状態で、上記1.7秒。
- delayループを入れて'-d0'では2.4秒。（つまり、８バイト単位でインターリーブしたほうが却って遅いという不本意な結果）

<!-- dummy comment line for breaking list -->

- とするとspi_trans()が入るだけで（ホストから見て）１フレーム後回しにされる遅延になる。
- spi_trans()がやや遅いと２フレーム後回しにされる遅延になる。

<!-- dummy comment line for breaking list -->

- ここらへんがソフト処理ＵＳＢの限界だ。
- プロトコルエンジンが後付けになっているようなＰＩＣ１８Ｆ２５５０とかＮＥＣ７８ＫではＵＳＢ転送はバックグラウンド的に実行されて共有ＲＡＭにパケットが残る仕組みなので、かなわない。
- というかＬｏｗＳｐｅｅｄの限界を見たような気もする。

<!-- dummy comment line for breaking list -->

- いろいろ考えたが解法は無い。ＳＰＩクロックをタイマー０から与えるようにしてクロックを上げる（？）
- 現状１２ＭＨｚ/４Ｃｙｃｌｅ/２（２回叩いて１ＳＣＬ）＝１.５ＭＨｚのＳＰＩクロックなので、これを２ＭＨｚ（８ＭＨｚＣＰＵ焼きの上限いっぱい）まで上げれば・・・たいして変わらない？
- ここまで来るとパズルだな。ＳＰＩ転送を割り込み駆動にしてバックグラウンド処理すれば良さそうに見えるけど、実はusbFunctionRead()は遅延実行できない関数なので、やるなら１パケット先読みで先回りするしかないだろう。書くほうは先読みの必要はないし（データが来るまで）出来ないから遅延実行するようにして即時復帰だ。
- そういった処理を書きたいならｍｅｇａ８８を使うしかない。Ｒｅａｄのインターリーブを実装しただけで２ｋＢを使い尽くしてLED,MONITORを外すことまでやった。

<!-- dummy comment line for breaking list -->

と、まあいろいろ考えたけれどここらが２ｋの限界点だ。

- - - -
## Ｗｒｉｔｅ＆Ｖｅｒｉｆｙ：４秒切りました。
	bash-2.02$ time ./hidspx.exe -rp >a.hex
	Detected device is ATmega88.
	Read    Flash: 8192/8192 B
	Passed. 

	real    0m1.672s
	user    0m0.015s
	sys     0m0.000s
	bash-2.02$ time ./hidspx.exe a.hex
	Detected device is ATmega88.
	Erase Flash memory.
	Write   Flash: 8192/8192 B
	Verify  Flash: 8192/8192 B
	Passed.
	
	real    0m3.939s
	user    0m0.015s
	sys     0m0.000s

- 例のusi_transの最適化

		static uint8_t usi_trans(uint8_t data){
		USIDR=data;
		USISR=(1&lt;&lt;USIOIF);
		if(wait==0) {
			uchar CR0=(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USITC);
			USICR=CR0;
			uchar CR1=(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USITC)|(1&lt;&lt;USICLK);
							USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;	asm("nop");
			USICR=CR0;	asm("nop");	USICR=CR1;
		}else{
			do{
				delay(wait);
				USICR=(1&lt;&lt;USIWM0)|(1&lt;&lt;USICS1)|(1&lt;&lt;USICLK)|(1&lt;&lt;USITC);
			} while(!(USISR&amp;(1&lt;&lt;USIOIF)));
		}
		return USIDR;
		}
- と、いろいろデバッグのために入れていたSleep全部取っ払いで、こんな感じです。
- 変な(?)モニターコマンドとＬＥＤコマンドの両方を入れると、コードが２バイト溢れます。
    - 配線をＩＮＴ０に戻せば２０４８といった感じですが、変なモニターのほうは需要がなさそう

<!-- dummy comment line for breaking list -->
なので、外しておきます。
- d0は最速なのでよいとして、d1〜d5とd6以降の件は、ホスト側のhidasp.cにテーブルを持たせますかね。

<!-- dummy comment line for breaking list -->

REPORT_ID=6(46)は、現在使用していない（バッファが４０バイトしか確保していない）ので削除すると
９バイト空きます。


- - - -
## ＵＳＢａｓｐの実装を見てみることにした。
- ＡＴｔｉｎｙ２３１３しか持ってなかったころ（ＡＴｍｅｇａは秋月で取り扱っていなくて、他社だと高価だった）はＡＴｍｅｇａを使用したライターには全く興味がなかった。
- しかし、速度向上をやるにつれて、他のＡＶＲＵＳＢ利用のライターがどのくらいの性能なのか知りたくなった。
- ＵＳＢａｓｐのページを見ると、

		Programming speed is up to 5kBytes/sec.
		SCK option to support targets with low clock speed (&lt; 1,5MHz).
- こんな感じ。
- firmwareのソースを見る。
- 普通にlibusbでやっていて、コントロール転送のみ、エンドポイント無し。
- usbFunctionRead,Writeは存在する。８バイト単位でisp転送を処理。
- **まるでＨＩＤａｓｐと変わらない。ＨＩＤデバイスであるかどうかだけ。**
- ＳＣＬＫは３７５ｋＨｚ（ターゲット１.５ＭＨｚ以上の場合）
- もしくは８ＫＨｚ（ＳＬＯＷ　ＭＯＤＥ）

<!-- dummy comment line for breaking list -->

**なのに５ｋＢ／Ｓ！！！**

考察：
- ＵＳＢの１フレーム（１ｍＳ）に８バイトのＬｏｗＳｐｅｅｄパケットは最大で６個くらい詰め込める。（バルク転送でＯＨＣＩの場合）
- ということは正味転送時間は１６０μＳ/８バイト程度
- 残りの時間は８４０μＳ空く。（もちろんそのバス帯域を皆でシェアするわけだが）

<!-- dummy comment line for breaking list -->

- で、３７５ＫＨｚのusi_trans()（ＳＰＩ転送）を３２回（８バイトのＨＥＸを書きこむ場合の回数）呼ぶ時間を計算すると、

		((1/375000) * 8 ) * 32 = 682 μＳ
- 時間、足りてるじゃん。
- libusbだとうまくいくのかな？。

<!-- dummy comment line for breaking list -->

ファームウェアのコードサイズは３.５ｋＢだ。
- ＡＶＲのコードはポインタ渡しが多いと長くなる。
    - これはポインタに使用できるレジスタがx,y,zしかないので、レジスタ退避のpush,popがばかにならない数入るから。
- 渡す必要のない決め撃ちバッファばかりの場合は引数なし関数にして参照しまくれば短くなる。
- そうでなければ、バッファは共通にしてバイトオフセットを渡すとか工夫するとやや短くなる（ソースは汚い）
- 昔の６５０２のabs,xではabsが渡せないので、そういった感じになっていた。

<!-- dummy comment line for breaking list -->

- - - -
## コントロール転送：訳分からなくなった。
- AVRtermを少し改造。usbFunctionReadを使うようにして、１回呼ばれるごとに遅延を入れた。
- 遅延ループは 60番地に定数を置いている。値１が100uSだ。

		AVR&gt; e 60 0
		AVR&gt; bench 100 32
		ctrl write start
		ctrl write end 3200 297 s  10774 byte/s  ノーウェイト. 3フレームで完結.
		AVR&gt; e 60 1
		AVR&gt; bench 100 32
		ctrl write start
		ctrl write end 3200 500 s  6400 byte/s   100us遅延. 5フレーム.
		AVR&gt; e 60 2
		AVR&gt; bench 100 32
		ctrl write start
		ctrl write end 3200 704 s  4545 byte/s   200us遅延. 7フレーム.
		AVR&gt; e 60 3
		AVR&gt; bench 100 32
		ctrl write start
		ctrl write end 3200 891 s  3591 byte/s   300us遅延. 9フレーム.
		AVR&gt; e 60 4
		AVR&gt; bench 100 32
		ctrl write start
		ctrl write end 3200 1016 s  3149 byte/s  400us遅延. 10フレーム.
- これを見ると100uSの遅延でも大きく響いている。(平均して２フレームも遅れる)
- しかし、ＵＳＢａｓｐは680uSの遅延があるはずなのにまったくスループットに影響を与えないのは**何故か？**

<!-- dummy comment line for breaking list -->

これが解けたら良いんだけどなぁ。ＵＳＢａｓｐ作るかなぁ・・・。



- ところがこんどは、ＵＳＢハブを外して、パケットを６４バイトで調べると、傾向が変わった。

<!-- dummy comment line for breaking list -->

	F:\its\avr\AVRbench\win32>term -iscript
	found 3 busses
	AVR> e 60 0
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 500 s  12800 byte/s
	AVR> e 60 1
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 906 s  7064 byte/s
	AVR> e 60 2
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 1297 s  4934 byte/s
	AVR> e 60 3
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 1703 s  3758 byte/s
	AVR> e 60 4
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 2235 s  2863 byte/s
	AVR> e 60 5
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 2500 s  2560 byte/s
	AVR> e 60 6
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 3297 s  1941 byte/s
	AVR> e 60 7
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 3500 s  1828 byte/s
	AVR> e 60 8
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 4094 s  1563 byte/s
	AVR> e 60 9
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 4407 s  1452 byte/s
	AVR> e 60 10
	AVR> bench 100 64
	ctrl write start
	ctrl write end 6400 7500 s  853 byte/s
	AVR> exit
	Bye.
- あ、しまった、最後の１０は１６進だった。
- ＵＳＢハブはオーバーヘッドを持っている？？？

<!-- dummy comment line for breaking list -->

- この解析、何が複雑かっていうとＯＨＣＩなのにハブを持たせてあるところ。
- ＵＨＣＩでサンプルを取ってみないと、正しい評価ができないかも。

<!-- dummy comment line for breaking list -->

- まあしかし、200uSの遅延があっても５ｋＢ/Ｓは出ている。（これもＯＨＣＩ特有の現象かもしれない）

<!-- dummy comment line for breaking list -->

ＴｏＤｏ：
- ＵＨＣＩでの傾向を調べる。
- 上記はベンダリクエストでやっているので、これをクラスリクエストに変更して試す。(libusbはそのまま)
- ＨＩＤ.ＤＬＬのアクセスに変えて試す。

<!-- dummy comment line for breaking list -->

それでも分からなかったらＵＳＢａｓｐを作るしか。

- - - -
## ＵＨＣＩ（インテル互換ＵＳＢホスト）での傾向を手に入れた
- 石はインテル純正ｉ８１５（鱈セレＶＡＩＯノート）
- ハブ無し直結

		found 2 busses
		AVR&gt; e 60 0
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1101 s  5812 byte/s
		AVR&gt; e 60 1
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1102 s  5807 byte/s
		AVR&gt; e 60 2
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1101 s  5812 byte/s
		AVR&gt; e 60 3
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1102 s  5807 byte/s
		AVR&gt; e 60 4
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1102 s  5807 byte/s
		AVR&gt; e 60 5
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1101 s  5812 byte/s
		AVR&gt; e 60 6
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1102 s  5807 byte/s
		AVR&gt; e 60 7
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1902 s  3364 byte/s
		AVR&gt; e 60 8
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1903 s  3363 byte/s
		AVR&gt; e 60 9
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 1893 s  3380 byte/s
		AVR&gt; e 60 10
		AVR&gt; bench 100 64
		ctrl write start
		ctrl write end 6400 2704 s  2366 byte/s
		AVR&gt; exit
		Bye.
		#
- **うぉーＵＨＣＩすげーーーー**
- 噂は本当だった。
- ほんとに６００μＳまで時間消費しても常に５ｋＢ/Ｓだ！

<!-- dummy comment line for breaking list -->

高々、鱈セレの９００ＭＨｚなのに感動した。

- - - -
## ＨＩＤａｓｐの高速化は一段落
- [ＨＩＤａｓｐ高速化](ＨＩＤａｓｐ高速化.md) に、いろいろ記述。
- とりあえず、標高２０４８（山頂）に到達したので終了。
- インターリーブの方向は諦めて、現行のコードにTIMER0 SPI CLOCKを実装しようとしているが、なかなかうまくいかない。
- 適当なサンプルもない。USBaspのmega88とはＳＰＩ周りのポートがかなり違っている？
- 頭を冷やすしか。

<!-- dummy comment line for breaking list -->


- - - -
## Ｇｌｉｂに興味。
- Ｃ＋＋でなく、Ｃでいろいろやろうとすると、いろいろなコンテナをその場限りでチープに作っては壊し、スクラップ＆ビルドで時間の無駄が多い。
- Ｇｌｉｂというライブラリがあって、ＳＴＬのようなコンテナっぽいやつとか、スレッド周りとか便利関数がいっぱい詰まっている。
- これが使いこなせればいいな。
- ＷｉｎｄｏｗｓとＬｉｎｕｘで共通の書き方が出来るらしい。
- 元々はＧｔｋのライブラリだそうだ。

<!-- dummy comment line for breaking list -->

- ＳＴＬが全然読めないので、こっちに逃避。

<!-- dummy comment line for breaking list -->

ここの通りにやってみたら、ちゃんとＭｉｎＧＷでglibが使えるようになった。
- [http://alohakun.blog7.fc2.com/blog-entry-587.html](http://alohakun.blog7.fc2.com/blog-entry-587.html) 

<!-- dummy comment line for breaking list -->

- このライブラリはＬｉｎｕｘでもほぼ同様に使えるので便利。
- ただし、微妙に libglib-2.0-0.dllみたいなＤＬＬが必要になるのがちょっと痛い。
- ＬｉｎｕｘではＤＬＬ不要（え？） .soだよね。

<!-- dummy comment line for breaking list -->

- - - -
## ＨＩＤａｓｐ：そろそろやることがなくなってきた。
- ので、パケット最適化をやろうと思う。
- page_writeのset_address後は常にpage_writeなので、これをフュージョンする。
- page_write後のisp_commandもフュージョンしてみる。

<!-- dummy comment line for breaking list -->

- page_readはそれほど無駄がないのでそのまま。

<!-- dummy comment line for breaking list -->

- あと、HIDのパケット長ももうすこし整理してみる？

<!-- dummy comment line for breaking list -->

- いよいよメモリー残量が尽きた。
- 結果は[ＨＩＤａｓｐ高速化](ＨＩＤａｓｐ高速化.md) と、[ＨＩＤａｓｐ速度比較](ＨＩＤａｓｐ速度比較.md) 。

<!-- dummy comment line for breaking list -->

多少速くなったとぬか喜びしたところ、ＵＨＣＩマザーで試すと全然速くない。
- 振り出しに戻る。

<!-- dummy comment line for breaking list -->

- - - -
## ＨＩＤａｓｐ：積み残し作業について
結局振り出しに戻ってしまった。
- ベンチマークＨＩＤｍｏｎ専用のファームを開発する。
- usbFunctionWrite()に遅延ループを入れて、遅延を制御しながら、長いＨＩＤ　Ｒｅｐｏｒｔの転送をベンチする。
- ＵＨＣＩとＯＨＣＩでの傾向を調べる。

<!-- dummy comment line for breaking list -->

- libusbならＵＳＢａｓｐ相当（５ｋ/秒）の速度が出るはず（予想）
- しかし、今回はＨＩＤで試みる
- - - -
## ネットブックが、あんなに安い理由
笠原一輝のユビキタス情報局
- [http://pc.watch.impress.co.jp/docs/2008/0926/ubiq228.htm](http://pc.watch.impress.co.jp/docs/2008/0926/ubiq228.htm) 
- そうか９４５ＧＳＥは＄２０なのか。
- ＳＣＨより＄５も安いのに性能が断然上だから。
- ＳＣＨ搭載モデルが出てこないのはなぜ？
- と思っていたら、デザインガイドはインテルなんだな。
- つまり設計料もタダでやってる商売か。
- だから、似たような構成で各社出してる。
- ＳＣＨはＰＡＴＡだけのようだ。ＳＡＴＡは繋がらないがＰＣＩ−ＥＸＰＲＥＳＳ×１がある。
- もういまどきＰＡＴＡはないだろう。ＰＣＩ−ＥＸＰＲＥＳＳ経由でＳＳＤだ。
- どうやらメモリーが１Ｇまで（最近になってようやく２Ｇ）なので敬遠されている？

<!-- dummy comment line for breaking list -->

しかしまあ、液晶込みで＄３００で作れているのは凄いの一言だ。
- ＰＳ３よりローコストなのに高性能。（ＲＳＸとＢＤドライブ除く）

<!-- dummy comment line for breaking list -->

- - - -
## １０月以降は、トンデモネタは書かないと誓ったので、９月の日記に書く。
- ９月暴落とついうっかり書いてしまったが、１０月崩壊は全くの予想外だった。
- （景気）１０月コツン説というのは聞いていたが・・・。

<!-- dummy comment line for breaking list -->

- 有名な[本と映画と政治の批評Ｂｌｏｇ](http://mblog.excite.co.jp/user/critic5/) 
- に鋭い考察が書かれていて感心する。

<!-- dummy comment line for breaking list -->

例えば、
- 日本のバブル崩壊はどうやって回復したのか、失われた１０年とはなんだったのかという点について

		実際には日本は時間をかけて不良債権を処理して行ったのである。
		「時間をかけて処理する」というのは、政府が無理な外科手術をせず、
		自然治癒の療法で傷を治し体力を戻したということだ。
		無論、それは銀行が節制と倹約の自助努力で解決したのではない。
		日本の国民が処理したのである。日本国民の10年間の犠牲で不良債権は銀行帳簿から消えた。
		#
		国民に説明しない。説明すれば反発を喰らうのは目に見えているから、
		騙し騙し静かにそっとやる。国民を犠牲にすること、時間をかけること、
		この二つの柱で宮沢喜一は結果的に日本の不良債権問題を解決した。
		だが、本人が言挙げしなかったから、功罪含めて名前は残っていない。
- 引用ここまで
- 今回の当事国アメリカには、１０年の長きにわたり耐え忍んで回復するという考え方はおそらくないので、
    - 世界中を巻き込んで自滅する（ＦＲＢが持ちこたえられない場合）、か
    - 日本、アジアを含む他国に多くを負担させて迷惑を掛ける
- になると予想する。
- ただ、今回分かったことは世界経済自体がまるでウェブのごとくグローバル化してリンクしているので、
- どこかの国が自滅しそうになっただけで世界全体を巻き込んでしまうことだ。
- また、１つの国が経済的に自滅するのはしかたないとしても、内戦や戦争を引き起こすのだけは絶対にやめてもらいたい。
- マケイン氏は高齢で、もしも大統領に選ばれたらペイリン氏が引き継ぐ可能性は１/３と見積もられているらしい。
- ペイリン氏の人気はあるのかもしれないが本人の資質に問題がありそうだ。（まあブッシュでも務められたわけだけど）。具体例としては職権乱用問題が挙げられる。

<!-- dummy comment line for breaking list -->


- [田中宇の国際ニュース解説：世界はどう動いているか](http://tanakanews.com/) にも、今回の金融崩壊後どうなるかという鋭い予測がされており興味深い。

<!-- dummy comment line for breaking list -->

- - - -
アメリカという国が無くなったらどうなるのか。~
おそらくこれから起こることは、
- ドル価値が暴落してデフォルトを起こす。
- 米国債を大量保有している日本や中国が連鎖デフォルト。
- 合衆国は解体され、カナダ、メキシコなどと、独立州で構成されたゆるいアメリカ連邦を形成する。
- ドルは消滅し、新通貨アメロ（ユーロの北米版らしい）に移行するのか。
- ロシア、中国、中東などが解体された州を分割してしまった場合はどうなるのか。内戦が起きるのか。

<!-- dummy comment line for breaking list -->

こういった最悪の事態になることは避けてほしいものだ。

あるいはかつて資本主義国だった国々の大半は社会主義国になり、ロシアと中国が資本主義の中心になる。
- 大規模な地殻変動が起きる。

<!-- dummy comment line for breaking list -->

理想論で言うと
- 貨幣価値に頼らない新世界秩序が生まれるのが望ましいことかもしれないが、それは無理だ。

<!-- dummy comment line for breaking list -->

- - - -
- このところ**毎日がブラックマンデー♪**（洒落になってない）

<!-- dummy comment line for breaking list -->

ゴルゴ１３の預金口座は保護されるか？
- [UBSの危機とスイスの破綻 − 資本主義の歴史と象徴が崩れる](http://mblog.excite.co.jp/user/critic5/entry/detail/?id=9703761&amp;_s=b4db2b962e4d77dbc26b889c51925411) 

<!-- dummy comment line for breaking list -->

ドル崩壊は既定路線か？
- [「ブレトンウッズ２」の新世界秩序](http://tanakanews.com/081017brettonwoods.htm) 

<!-- dummy comment line for breaking list -->

- - - -
## ペイリン知事ご乱心
	ペイリン知事は、ホッキョクグマの絶滅危惧種指定について、「地球温暖化自体も、
	そのクマへの影響も確かでない」と主張し、内務省を提訴中。
	一方、環境団体「生物多様性センター」は「提訴したりせず、保護に取り組んでほしい」と求めている。

- [http://www.asahi.com/science/update/1018/TKY200810180187.html](http://www.asahi.com/science/update/1018/TKY200810180187.html) 
- [http://news.goo.ne.jp/article/yomiuri/life/20081018-567-OYT1T00342.html](http://news.goo.ne.jp/article/yomiuri/life/20081018-567-OYT1T00342.html) 

<!-- dummy comment line for breaking list -->

- 普通に考えて、このひとを知事にしちまったアラスカ住民、**やっちまったな**
- 万一、副大統領に選んでしまったアメリカ人、**やっちまったな**（杵つきしながら）

<!-- dummy comment line for breaking list -->

なんかもうーだめっぷり全開じゃん。

- - - -
## 10/23[田中宇の国際ニュース解説](http://tanakanews.com/081021bank.htm)
	マケイン候補は、経済に詳しくない上に、副大統領候補にサラ・ペイリン
	（アラスカ州知事）という、国際政治も経済も知らない人物を選んでしまっ
	たため、敗北が決定的になったと分析されている

	（何の経験もない）ペイリンは副大統領にふさわしくないと、
	マケインは心の奥底でわかっていたはずだ」と述べた。

	他のパネリストが、マケインがそんな風に考えたとは思えないと反論すると、
	ダウドは「マケインがそれ（ペイリンが副大統領としていかに不適格か）に
	気づいていなかったとしたら、そっちの方が私には驚きだ」と再反論した。
- マケインさんの考えていることがよくわからない。
- - - -
## 今週のペイりんウオッチ
ペイリン氏、娘たちの旅費をアラスカ州に請求していた
- [http://www.cnn.co.jp/usa/CNN200810220010.html](http://www.cnn.co.jp/usa/CNN200810220010.html) 

<!-- dummy comment line for breaking list -->

- 職権乱用オバサンかよ。
- こうなるともう呆れる。

<!-- dummy comment line for breaking list -->

「普通の母親」ペイリン氏、洋服代に２カ月で１５００万円 
- [http://www.cnn.co.jp/usa/CNN200810230021.html](http://www.cnn.co.jp/usa/CNN200810230021.html) 

		ニューヨーク（ＡＰ）　米共和党の副大統領候補サラ・ペイリン・
		アラスカ州知事の洋服代に、党が２カ月で１５万ドル（約１５００万円）
		を払っていたことが分かり、同氏を支持してきた「普通の母親」たちから
		疑問の声が上がっている。
- マケイン候補、ペイリン氏が足かせに　投開票まで２週間
- [http://www.asahi.com/international/president/analysis/TKY200810220267.html](http://www.asahi.com/international/president/analysis/TKY200810220267.html) 

		パウエル前国務長官は「彼女は万一の際に大統領になる用意はない」
		と起用を批判し、ＮＢＣニュースが２１日発表した世論調査でも５５％が
		同様の見方を示した。
- ここにきて、ペイリン降ろしの報道攻勢。
- マケインさん、**やっちまったな**

<!-- dummy comment line for breaking list -->

- - - -
## ぺイりんウォッチもそろそろ終了か
ＮＹタイムズもオバマ氏支持「困難な時代に選択は簡単」
- [http://www.asahi.com/international/update/1024/TKY200810240249.html](http://www.asahi.com/international/update/1024/TKY200810240249.html) 
- 結論は出たようだ。
- 困難な時代になったことで共和党が政権を担うことを諦めたのではないだろうか。
    - （あるいは主要な資本が米国から脱出しているということを表したのか）
- １ドル９０円をつけた。おそらく８０円を付けるのも時間の問題だ。
- 強烈な為替の巻き戻しと、ドル崩壊が同時に進行している。
- **先は見えない。**

<!-- dummy comment line for breaking list -->

- - - -
## ついに日経７０００割れ
クリントン前大統領、オバマ氏集会に初参加へ 
- [http://www.cnn.co.jp/usa/CNN200810260010.html](http://www.cnn.co.jp/usa/CNN200810260010.html) 

<!-- dummy comment line for breaking list -->

マケイン氏顧問とペイリン氏の間に不協和音　手に負えないと 
- [http://www.cnn.co.jp/usa/CNN200810260002.html](http://www.cnn.co.jp/usa/CNN200810260002.html) 

<!-- dummy comment line for breaking list -->

アラスカ州有力紙がオバマ氏支持　ペイリン知事のお膝元 
- [http://www.cnn.co.jp/usa/CNN200810270005.html](http://www.cnn.co.jp/usa/CNN200810270005.html) 

		いざという時に大統領職を引き継ぐ立場にペイリン氏を置くことは
		「現時点ではあまりに危険すぎる」と断言。
- なんかもうこんな感じ
- 副大統領候補の選択は、ほんの軽いジョークだったんだよ。
- 間違って当選すると（国民が）困るから、取り下げね。

<!-- dummy comment line for breaking list -->


- - - -
### [テニスコートの誓いとポストIMF - 新大統領とG20サミットの情勢](http://mblog.excite.co.jp/user/critic5/entry/detail/?id=9776082&amp;_s=7465ed8b75bf964653221cc2dce60e94)
- ９月暴落、１０月崩壊と来て、オバマ政権誕生はほぼ決まり。
- １１月は戦争？テロ？地震
- 全部起きるのか。

<!-- dummy comment line for breaking list -->

[ＬＨＣのほうは、当分再稼動しない。](http://www.47news.jp/CN/200809/CN2008092401000130.html) 

結局何が起きたんだっけ？
- バーチャル＄（仮想投機マネーと仮想保証負債）の対消滅
- バーチャル＄に頼っていた実体経済の終焉。
- それを救済しようとして失敗したＦＲＢ
- 破綻する通貨、そして国家経済

<!-- dummy comment line for breaking list -->

損害を蒙るのが米国だけかと思っていたら、世界全体だった。
- - - -
## そろそろ結論が出る頃
- [世に倦む日日](http://mblog.excite.co.jp/user/critic5/entry/detail/?id=9816052) 

<!-- dummy comment line for breaking list -->

	ペイリンなど、政治を語る資質と資格のないお騒がせ屋の芸能女に過ぎず、
	アラスカ知事や副大統領候補などに選ばれるのがそもそもの間違いで、
	日本の東国原英夫と同じ類のお笑い政治家であり、米国にプライドがある
	のなら、論外の存在として無視するのが適切な扱いだろう。

はたして、「論外の存在」が当選することは無かろうと思うがいかに？
- これが「初の（迷惑な）女性大統領」となる可能性もある。

<!-- dummy comment line for breaking list -->

- - - -
## 結論が出たようだ。
- アメリカは立ち直れるか。それとも崩壊するか。

<!-- dummy comment line for breaking list -->

- - - -
## 結論は良い。だが不吉な兆候がある。
- [オバマと今後の米国：▼ブッシュが仕掛けた大黒柱の時限爆弾](http://tanakanews.com/081105obama.htm) 

<!-- dummy comment line for breaking list -->

- **つまり、共和党（を操る陰の勢力）はわざと負けた**＞自滅するごとくに。
- それはオバマに（崩壊の）責任をなすりつけるためだ。
    - というよりは、責任取れなくなって逃げ出したというべきか。
- オバマにバトンタッチ後、重要な時限爆弾が爆発する仕掛けらしい。

<!-- dummy comment line for breaking list -->

- たとえばＧＭ含むいくつかの巨大な企業破綻とか、ハイパーインフレとか、イスラフェルの暴走とかそんなやつ。

<!-- dummy comment line for breaking list -->

- - - -
## オバマ勝利 - 暗殺の危機と騒乱の予感
- [世に倦む日日](http://mblog.excite.co.jp/user/critic5/entry/detail/?id=9851537) 
- まだ危機は去っていない。
- 任期中に彼が暗殺された場合、後継者は誰か？
    - ハッ、**ミッシェル夫人**

<!-- dummy comment line for breaking list -->

	逆に、オバマがゴルバチョフのように難を逃れて任期を無事に全うすれば、
	ドル暴落と米国債償還不全とIMF解体に直面する大統領になり、
	GDPのマイナス成長が続く中で有効な対策がとれないまま苦悩し、イラク
	とアフガンからの敗走を余儀なくされ、さらに、不本意ながら東半球に
	展開した米軍基地の放棄撤収を決断しなければならない大統領になる。

とりあえずアメリカ内戦だけはやめといてくれ


- - - -
## ドル没落は必定
- [米ドルはもはや世界の基軸通貨ではない。ＩＭＦがドルに代わる新しい国際決済通貨を発行する「新世界秩序」を提案するだろう](http://blog.goo.ne.jp/2005tora/e/85cb33c135b8b59855463b2c4fc4482a) 

<!-- dummy comment line for breaking list -->

- [さよならドル](http://archive.mag2.com/0000012950/20081101234311000.html) 

<!-- dummy comment line for breaking list -->

	さらに、中東産油国が湾岸共通通貨導入を検討しはじめた。
	つまり、中ロの動きにより、ドミノ現象が起これば？？？
	わかりますね。

	１、ドルは大暴落し、基軸通貨でなくなる
	２、アメリカは普通の国となる
	３、アメリカは普通の「世界一の借金大国」となり国家破産
	４、アメリカ、ハイパーインフレ
	５、世界恐慌

	もっとも重要なのは、中国とロシアは１〜５の結末を見越して、ドルを攻
	撃しているということ。

	別の言葉でいえば、中ロは、「アメリカが没落しても、おれらはサバイバ
	ルできるだろう」と計算しているということなのです。


- - - -
## [米金融界が米国をつぶす（tanakanews.com）](http://tanakanews.com/081128bank.htm)
- ＡＩＧを救うための巨額の公費は、実のところＡＩＧを経由してゴールドマンサックスの懐に入り、損失補てんに使われていたというのは伝え聞いているが、
- もちろんポールソン財務長官は元ゴールドマンサックス会長なので、見方によっては**巨大な裏金工作**の香りがする。
- 結局のところ、この最悪の事態の犯人である米国金融界は、この期に及んでもなお、自ら米国経済を破綻に向かわせているわけで、（その結果自分たちも結局は自滅するわけだが）

<!-- dummy comment line for breaking list -->

- 結果オバマは責任を取って辞任し、クリントンに代替わりしたのち社会主義国になってしまう（しかない）という帰結になる。
- なんてこった。まるっきりロシアとアメリカの立場がチェンジだ。

<!-- dummy comment line for breaking list -->

- 対米従属に慣れきっている日本の政治家たちは無策のままなので、いずれ日本は中国とロシアに従属せざるをえなくなる日が来るのかもしれない。

<!-- dummy comment line for breaking list -->

悲観的だが、確率的にはそういうこと。

- - - -
## 暴落、金融崩壊と来て、ついに戦争まで・・・
[オバマに贈られる中東大戦争](http://www.tanakanews.com/081228Gaza.htm) 
- 世界は、あいかわらず最悪の方向に向かっているようだ。
- 中東情勢が不安になると、また石油が暴騰するのかもしれない。
- だとすると、これを仕組んだのは誰？
- 地震は来なかった。２００９年に持ち越しのようだ。

<!-- dummy comment line for breaking list -->


- - - -
## アメリカ合衆国が分裂するという予測
- [アメリカの経済紙WSJで「アメリカ合衆国は2010年に6つの国に分割する」確率は45〜55％](http://blog.goo.ne.jp/2005tora/e/e3c87c264884e016ec45e48239cc3ab5) 

<!-- dummy comment line for breaking list -->

- そうだ。連銀が破綻すれば、むしろ、こうなるのが自然だろう。
- 連銀が破綻しないという歴史分岐ももちろんありうるし、そのほうが世界にとっては都合が良いのかもしれないが、難しいだろう。
- ２００８年９月以前の世界線から見た場合、こんなこと（現在の悲観的な状況のこと）はＳＦでもありえないことに見えただろう。

<!-- dummy comment line for breaking list -->

- - - -
## 今このエントリーを書いている日付は2009-1-21（オバマ政権が誕生した日）だが
[ヤスの備忘録　歴史と予言のあいだ](http://ytaka2011.blog105.fc2.com/blog-entry-111.html) 


**２００９年地獄の夏に向かって５**ここにメモしておこう。~

	金融危機の全体像
	
	デイビッド・シュリックは、現在の危機を１つの金融危機として理解すると問題の本質を見失うと主張している。
	彼によると現在われわれが経験している危機は、７つのバブルが一つずつはじけている状態であるとして問題の
	とてつもない深さに警鐘 を鳴らしている。それらは次の７つだ。下の数字は予想損失額を示す。
	
	①サブプライムローン関連バブル
	（１.５兆ドル　１５０兆円）
	②新興国市場のバブル
	（５兆ドル　５００兆円）
	③クレジットカードバブル
	(2.５兆ドル　２５０兆円)
	④商品先物バブル
	（９兆ドル　９００兆円）
	⑤商業不動産バブル
	（２５兆ドル　２５００兆円）
	⑥外国為替デリバティブバブル
	（５６兆ドル　５６００兆円）
	⑦ＣＤＳバブル
	（５８兆ドル　５８００兆円）


サブプライムなんて、たったの１５０兆円でこのザマだ。

~
~
~
- - - -
## アメリカ合衆国は分裂する？。
tanakanews:
- [揺らぐアメリカの連邦制](http://tanakanews.com/090218UnitedStates.htm) 

<!-- dummy comment line for breaking list -->

以前にも、ロシアのアナリストが、アメリカ分裂の可能性を指摘した。
- [http://blog.goo.ne.jp/yamahafx/e/84e39406835dbe8d8e35793482655e49](http://blog.goo.ne.jp/yamahafx/e/84e39406835dbe8d8e35793482655e49) 

<!-- dummy comment line for breaking list -->

- だが、元はといえば、かの新大陸は、先住民族のインディオの国だったはずだ。
- それをヨーロッパの国々が横取りしただけの話であり、
- まだ３００年とそこらしか経過していないのである。

<!-- dummy comment line for breaking list -->

- 時間は巻き戻される。

<!-- dummy comment line for breaking list -->

そうすると、**あまりにもジョンタイターのいた時間軸と同じ展開**

~
SIZE(32){戦慄すら覚える。}

~
- ２００８年７月末の時点では、絶対にありえないと考えられていたことが半年後にはまさに現実になろうとしている。
- この驚きと恐怖を記憶に刻みつけて置かずにはいられまい。

<!-- dummy comment line for breaking list -->


~



	「アメリカ国内で暴動勃発、2011年、内戦が原因でアメリカ合衆国が解体
	 されるが、翌年にはアメリカ連邦帝国が建国する。2020年、アメリカ都市部
	 の敗北により内戦はほぼ終結、新たな連邦政府が成立するが、地方区分は
	 現在の州ではなく、分裂したときと同じく5勢力になり、社会主義国家に
	 近くなる。アメリカ内戦後の生存者は図書館や大学の周りに集結して
	 コミュニティを結成している。
	 連邦政府は首都をオマハ（旧ネブラスカ州）に置いている。」
	ジョン・タイター（内容要約）

- 現在の時空は、ジョン・タイターのいた時空に繋がっている可能性が高くなった。

<!-- dummy comment line for breaking list -->

~
~
~
~




- - - -

